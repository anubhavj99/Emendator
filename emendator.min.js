var smartInputBoxDecoder=function(a,b){let c=function(k){let l={};try{l=JSON.parse(k)}catch(m){l=k}return l},d=function(k){let m='\t\t\t<div class="my-4">\t\t\t\t<div class="row no-gutters">\t\t\t\t\t<div class="offset-md-1 col-md-8 col-12">\t\t\t\t\t\t<div class="pollCreate">\t\t\t\t\t\t\t<form>\t\t\t\t\t\t\t';for(let o=0;o<k.length;o++)m+='\t\t\t\t\t\t\t\t<div class="row my-2">\t\t\t\t\t\t\t\t\t<div class="col-2 bigRadioOuterDiv">\t\t\t\t\t\t\t\t\t\t<button class="bigRadio notSelected" type="button">\t\t\t\t\t\t\t\t\t\t\t<div class="bigRadioDiv">\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<input type="radio" class="bigRadio" name="'+b+'" value="'+(o+1)+'">\t\t\t\t\t\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="col-10">\t\t\t\t\t\t\t\t\t\t<label class="lead" for=\'[name="'+b+'"]\'>'+k[o]+'</label>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t';m+=' \t</form>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t';let n=document.createElement('div');return n.innerHTML=m,n},f=function(k){let m=document.createElement('div');return m.innerHTML='\t\t\t<div class="my-2">\t\t\t\t<img src="'+k+'" class="mainColumnCardImage img-thumbnail">\t\t\t</div>\t\t',m},g=function(k){let m=document.createElement('div');return m.innerHTML='\t\t\t<div class="embed-responsive embed-responsive-16by9 my-4">\t\t\t  <iframe class="embed-responsive-item" src="'+k+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\t\t\t</div>\t\t',m},h=[];return a.forEach(function(k){if('defined'==k.type){let l=document.createElement(k.tag);if(k.attributes)for(let m in k.attributes){let n=document.createAttribute(m);n.value=k.attributes[m],l.setAttributeNode(n)}if(k.text&&(l.innerHTML=k.text),k.children){let m=smartInputBoxDecoder(k.children);m.forEach(function(n){l.appendChild(n)})}if('table'==k.tag.toLowerCase()){let m=document.createElement('div');m.className='table-responsive my-4',l.className='table table-hover table-bordered',m.appendChild(l),l=m}'thead'==k.tag.toLowerCase()&&(l.className='thead-light'),h.push(l)}else if('text'==k.type){let l=document.createTextNode(k.text);h.push(l)}else if('custom'==k.type)if('image'==k.objecttype){let l=f(k.objectdata);h.push(l)}else if('poll'==k.objecttype){let l=d(c(k.objectdata),b);h.push(l)}else if('video'==k.objecttype){let l=g(k.objectdata);h.push(l)}}),h},smartInputBoxToolbarCreator=function(a){let b='';return(a.undoaction||a.redoaction||a.printaction)&&(b+='<div class="inputBoxOption-child-group">',a.undoaction&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="undoaction">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-undo-alt"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.redoaction&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="redoaction">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-redo-alt"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.printaction&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="printaction">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-print"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),(a.fontStyle||a.fontSize)&&(b+='<div class="inputBoxOption-child-group">',a.fontStyle&&(b+='\t\t\t\t<button class="inputBoxOption-child active-no-stay" child-function="fontStyle">\t\t\t\t\t<span class="inputBoxOption-child-view withInput">\t\t\t\t\t\t<select class="inputBoxOption-input no-active-trigger form-control" type="text" name="getValue" value="Serif">\t\t\t\t\t\t\t<option value="serif" style="font-family: serif;">Serif</option>\t\t\t\t\t\t\t<option value="sans-serif" style="font-family: sans-serif;">Sans-Serif</option>\t\t\t\t\t\t\t<option value="monospace" style="font-family: monospace;">Monospace</option>\t\t\t\t\t\t</select>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.fontSize&&(b+='\t\t\t\t<button class="inputBoxOption-child active-no-stay" child-function="fontSize">\t\t\t\t\t<span class="inputBoxOption-child-view withInput">\t\t\t\t\t\t<select class="inputBoxOption-input no-active-trigger form-control" name="getValue" type="number">\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t<option value="3" selected>3 (Default)</option>\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t</select>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),(a.italic||a.bold||a.underline||a.highlight||a.subscript||a.superscript)&&(b+='<div class="inputBoxOption-child-group">',a.italic&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="italic">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-italic"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.bold&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="bold">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-bold"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.underline&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="underline">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-underline"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.highlight&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="highlight">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-highlighter"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.subscript&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="subscript">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-subscript"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.superscript&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="superscript">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-superscript"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),(a.addQuote||a.addLink||a.addImage||a.addVideo)&&(b+='<div class="inputBoxOption-child-group">',a.addQuote&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="addQuote">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-quote-left"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.addLink&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="addLink">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-link"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.addImage&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="addImage">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-images"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.addVideo&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="addVideo">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-video"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),(a.alignLeft||a.alignCenter||a.alignRight||a.alignJustify)&&(b+='<div class="inputBoxOption-child-group" child-selection="unique">',a.alignLeft&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="alignLeft">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-align-left"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.alignCenter&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="alignCenter">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-align-center"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.alignRight&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="alignRight">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-align-right"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.alignJustify&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="alignJustify">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-align-justify"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),a.textHeight&&(b+='<div class="inputBoxOption-child-group">',a.textHeight&&(b+='\t\t\t\t<button class="inputBoxOption-child" child-function="textHeight">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-text-height"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),(a.unorderedListMaker||a.orderedListMaker||a.indent||a.outdent)&&(b+='<div class="inputBoxOption-child-group">',a.unorderedListMaker&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="unorderedListMaker">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-list-ul"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.orderedListMaker&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="orderedListMaker">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-list-ol"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.indent&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="indent">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-indent"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.outdent&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="outdent">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-outdent"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),(a.addPoll||a.createTable)&&(b+='<div class="inputBoxOption-child-group">',a.addPoll&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="addPoll">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<img src="customContent/pollIcon.svg" height="18" alt="Poll Icon"/>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),a.createTable&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="createTable">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-table"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),a.removeFormatting&&(b+='<div class="inputBoxOption-child-group">',a.removeFormatting&&(b+='\t\t\t\t<button class="inputBoxOption-child noActive" child-function="removeFormatting">\t\t\t\t\t<span class="inputBoxOption-child-view">\t\t\t\t\t\t<i class="fa fa-eraser"></i>\t\t\t\t\t</span>\t\t\t\t</button>\t\t\t'),b+='</div>'),$.parseHTML(b)},smartInputBox=function(a){function b(g,h=0){this.thisTemplateParentRef=$(g),this.initializeCounter=h,this.counter=0,this.getTemplatePreparedTemplate=function(){return this.counter+=1,' \t\t\t<div class="input-group mb-3" bb-template-counter="'+this.counter+'"> \t\t\t\t<div class="input-group-append"> \t\t\t\t\t<span class="input-group-text">'+this.counter+'</span> \t\t\t\t</div> \t\t\t\t<input type="text" class="form-control" placeholder="Poll Detail" aria-label="Poll Detail"> \t\t\t</div> \t\t\t'},this.addTemplateToTag=function(){this.thisTemplateParentRef.append(this.getTemplatePreparedTemplate())},this.removeLastTemplateFromTag=function(){this.thisTemplateParentRef.find('[bb-template-counter="'+this.counter+'"]').remove(),this.counter-=1},this.resetTemplateTag=function(){for(this.thisTemplateParentRef.html(''),this.counter=0;this.counter<this.initializeCounter;)this.addTemplateToTag()},this.resetTemplateTag()}document.execCommand('styleWithCSS',null,!0);var c=this;c.editorButtons={undoaction:{isCommand:!0,toBeChecked:!0,commandName:'undo'},redoaction:{isCommand:!0,toBeChecked:!0,commandName:'redo'},printaction:{isCommand:!1,toBeChecked:!1,commandName:''},fontStyle:{isCommand:!0,toBeChecked:!0,parameter:!0,commandName:'fontName'},fontSize:{isCommand:!0,toBeChecked:!0,parameter:!0,commandName:'fontSize'},italic:{isCommand:!0,toBeChecked:!0,commandName:'italic'},bold:{isCommand:!0,toBeChecked:!0,commandName:'bold'},underline:{isCommand:!0,toBeChecked:!0,commandName:'underline'},highlight:{isCommand:!1,toBeChecked:!1,surroundTag:!0,tagName:'mark'},subscript:{isCommand:!0,toBeChecked:!0,commandName:'subscript'},superscript:{isCommand:!0,toBeChecked:!0,commandName:'superscript'},addQuote:{isCommand:!1,toBeChecked:!1,surroundTag:!0,tagName:'quote',fullTagField:!0,commandName:'addQuote'},addLink:{isCommand:!0,toBeChecked:!1,parameter:!0,upload:!0,commandName:'createLink'},addImage:{isCommand:!0,toBeChecked:!1,parameter:!0,upload:!0,commandName:'insertImage'},addVideo:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},alignLeft:{isCommand:!0,toBeChecked:!0,commandName:'justifyLeft'},alignCenter:{isCommand:!0,toBeChecked:!0,commandName:'justifyCenter'},alignRight:{isCommand:!0,toBeChecked:!0,commandName:'justifyRight'},alignJustify:{isCommand:!0,toBeChecked:!0,commandName:'justifyFull'},textHeight:{isCommand:!1,toBeChecked:!1,commandName:'lineHeight'},orderedListMaker:{isCommand:!0,toBeChecked:!1,commandName:'insertOrderedList'},unorderedListMaker:{isCommand:!0,toBeChecked:!1,commandName:'insertUnorderedList'},indent:{isCommand:!0,toBeChecked:!0,commandName:'indent'},outdent:{isCommand:!0,toBeChecked:!0,commandName:'outdent'},addPoll:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},createTable:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},removeFormatting:{isCommand:!0,toBeChecked:!1,commandName:'removeFormat'}},c.thisParentContainerDiv=$(a.parentContainerId),c.thisContentEditableDiv=$(a.editorDivId),c.thisToolbarDiv=$(a.toolbarDivId),c.thisInputTakerPopUpDiv=$(a.inputTakerPopUpId),c.thisInputTakerTabs={},c.pollOptionsTemplate={},c.selectionObjectCreatedUser={},c.thisParentContainerDiv.css('position','relative'),c.thisContentEditableDiv.attr('contenteditable','true'),c.thisContentEditableDiv.empty(),c.thisContentEditableDiv.addClass('inputBox'),c.thisContentEditableDiv.addClass('clearfix'),c.thisToolbarDiv.addClass('inputBoxOptionSet'),a.isCompactContainer&&c.thisParentContainerDiv.addClass('inputBoxCombinedSmall'),a.placeholder&&c.thisContentEditableDiv.attr('placeholder',a.placeholder);let d=a.toolbarOptions&&0<Object.keys(a.toolbarOptions).length?a.toolbarOptions:c.editorButtons,f=$(smartInputBoxToolbarCreator(d));for(let g in c.thisToolbarDiv.append(f),c.editorButtons)c.editorButtons[g].upload&&(c.thisInputTakerTabs[g]=c.thisInputTakerPopUpDiv.find('.nav-item[name="'+g+'"]'));c.thisContentEditableDiv.on('paste',function(g){console.log(g),g.stopPropagation(),g.preventDefault();let h=g.originalEvent.clipboardData||window.clipboardData,k=h.getData('text/plain'),l=k.split('\n');for(let m=1;m<l.length;m++)l[m]='<div>'.concat(l[m].concat('</div>'));c.pasteHtmlAtCaret(l.join(''),!0)}),c.checkForEachButtonToBeActiveAndSetValues=function(){for(let g in c.editorButtons)if(c.editorButtons[g].isCommand&&c.editorButtons[g].toBeChecked&&(document.queryCommandState(c.editorButtons[g].commandName)?c.setActiveButton(c.thisToolbarDiv.find('[child-function="'+g+'"]')):c.setInactiveButton(c.thisToolbarDiv.find('[child-function="'+g+'"]')),c.editorButtons[g].parameter&&document.queryCommandValue(c.editorButtons[g].commandName))){let h=document.queryCommandValue(c.editorButtons[g].commandName);c.thisToolbarDiv.find('[child-function="'+g+'"]').find('[name="getValue"]').val(h)}},c.setOptionValuesForEachButton=function(){},document.onselectionchange=function(){0<c.thisParentContainerDiv.find(':focus').length&&c.checkForEachButtonToBeActiveAndSetValues()},c.checkForKeyPressActionsForDifferentElements=function(g){9==g.keyCode&&(g.preventDefault(),console.log(c.isSelectionInsideElementTag('td')),c.isSelectionInsideElementTag('li')?g.shiftKey?document.execCommand('outdent',!1,null):document.execCommand('indent',!1,null):document.execCommand('insertHTML',!1,'&emsp;')),13==g.keyCode&&c.isSelectionInsideElementTag('quote')},c.thisContentEditableDiv.on('keydown',function(g){c.checkForKeyPressActionsForDifferentElements(g)}),c.isSelectionInsideElementTag=function(g){var h,k;for(g=g.toUpperCase(),window.getSelection?(h=window.getSelection(),0<h.rangeCount&&(k=h.getRangeAt(0).commonAncestorContainer)):(h=document.selection)&&'Control'!=h.type&&(k=h.createRange().parentElement());k;){if(1==k.nodeType&&k.tagName==g)return!0;if(k=k.parentNode,k&&k.getAttribute&&k.getAttribute('id')==c.thisContentEditableDiv.attr('id'))return!1}return!1},c.thisToolbarDiv.on('click','.inputBoxOption-child',function(g){g.preventDefault();let h=g.currentTarget;c.checkAndSetActive(h,g);$(g.currentTarget)}),c.checkAndSetActive=function(g,h,k=!1){let l=$(g);c.doActionOfReferencedButton(l),l.hasClass('active')&&(k||0==$(h.target).closest('.no-active-trigger').length)?c.setInactiveButton(l):c.setActiveButton(l)},c.setInactiveButton=function(g){let h=$(g);h.removeClass('active')},c.setActiveButton=function(g){let h=$(g);h.addClass('active'),h.hasClass('active-no-stay')&&$(document).on('click',function k(l){0==$(l.target).closest(h).length&&(c.setInactiveButton(h),$(document).off('click',k))})},c.doActionOfReferencedButton=function(g){let h=g.attr('child-function');if(c.editorButtons[h].isCommand&&!0!=c.editorButtons[h].parameter)document.execCommand(c.editorButtons[h].commandName,!1,c.editorButtons[h].parameter);else if(c.editorButtons[h].isCommand){if(c.editorButtons[h].upload){c.selectionObjectCreatedUser=c.saveSelectionObject(),c.activateInputTaker(h)}else g.find('[name="getValue"]').on('change',function(k){let l=$(k.target).val();document.execCommand(c.editorButtons[h].commandName,!1,l)});}else if(c.editorButtons[h].surroundTag){let k=c.getSelectionObject(),l=document.createElement(c.editorButtons[h].tagName),m=document.createElement('div');c.editorButtons[h].fullTagField?(m.appendChild(l),l.innerHTML='&nbsp;',m.insertBefore(document.createElement('br'),l),m.appendChild(document.createElement('br')),c.pasteHtmlAtCaret(m)):c.getSelectionObject().getRangeAt(0).surroundContents(l)}else c.selectionObjectCreatedUser=c.saveSelectionObject(),c.activateInputTaker(h)},c.activateInputTaker=function(g){c.editorButtons[g].upload&&(c.thisInputTakerPopUpDiv.find('.modal-loader').removeClass('activate'),c.thisInputTakerTabs[g].tab('show'),c.thisInputTakerPopUpDiv.modal('show'))},c.deactiveInputtaker=function(){c.thisInputTakerPopUpDiv.modal('hide')},c.thisInputTakerPopUpDiv.on('click','button[name="pollOptionsAdd"]',function(g){let h=[],k=$($(g.target).attr('bb-getFrom'));k.find('input').each(function(m,n){h.push($(n).val())}),c.deactiveInputtaker(),c.thisContentEditableDiv.focus(),c.pollOptionsTemplate[k.attr('name')].resetTemplateTag();let l='<br/><br/><div objecttype="poll" objectdata=\''+JSON.stringify(h)+'\' class="editorPollDiv" contenteditable="false"><form>';h.forEach(function(m,n){l+='\t\t\t\t<div optionIndex="'+n+'" class="form-check">\t\t\t\t\t<input type="radio" class="form-check-input" name="inputCheckPoll">\t\t\t\t\t<label class="form-check-label">\t\t\t\t\t\t'+m+'\t\t\t\t\t</label>\t\t\t\t</div>\t\t\t'}),l+='</form></div><br/><br/>',c.restoreSelectionObject(c.selectionObjectCreatedUser),c.pasteHtmlAtCaret(l,!0)}),c.thisParentContainerDiv.on('submit','[name="addLink-form"]',function(g){g.preventDefault(),c.deactiveInputtaker(),c.thisContentEditableDiv.focus();let h=$(g.target).find('[name="getLinkInput"]'),k=h.val();c.restoreSelectionObject(c.selectionObjectCreatedUser),document.execCommand('createLink',!1,k)}),c.thisParentContainerDiv.on('submit','[name="addImage-form"]',function(g){g.preventDefault(),c.deactiveInputtaker(),c.thisContentEditableDiv.focus(),c.restoreSelectionObject(c.selectionObjectCreatedUser);let h=$(g.target).find('[name="image-add-link"]'),k=$(g.target).find('[name="image-file-upload"]');if(1==h.length){let l=h.val();c.pasteHtmlAtCaret('<br/><div class="my-2" contenteditable="false" class="img-thumbnail" objecttype="image" objectdata="'+l+'"><img style="width: 90%;max-width: 300px;" src="'+l+'"></div><br/>',!0)}else if(1==k.length);}),c.thisParentContainerDiv.on('submit','[name="addVideo-form"]',function(g){g.preventDefault(),c.deactiveInputtaker(),c.thisContentEditableDiv.focus(),c.restoreSelectionObject(c.selectionObjectCreatedUser);let h=$(g.target).find('[name="video-add-link"]'),k=$(g.target).find('[name="video-file-upload"]');if(1==h.length){let l=h.val();c.pasteHtmlAtCaret('<br/>\t\t\t\t<div class="my-2 d-flex justify-content-center" contenteditable="false" objecttype="video" objectdata="'+l+'">\t\t\t\t\t<iframe src="'+l+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\t\t\t\t</div>\t\t\t\t<br/>',!0)}else if(1==k.length);}),c.thisParentContainerDiv.on('submit','[name="createTable-form"]',function(g){g.preventDefault(),c.deactiveInputtaker(),c.thisContentEditableDiv.focus(),c.restoreSelectionObject(c.selectionObjectCreatedUser);let h=$(g.target),k=h.find('[name="row"]').val(),l=h.find('[name="column"]').val(),m=h.find('[name="includeHeader"]').is(':checked'),n='\t\t\t<table class="table table-bordered table-editing-hover">\t\t';if(m){n+='\t\t\t\t<thead class="thead-light">\t\t\t\t\t<tr>\t\t\t';for(let o=0;o<l;o++)n+='<th></th>';n+='\t\t\t\t\t</tr>\t\t\t\t</thead>\t\t\t'}n+='<tbody>';for(let o=0;o<k;o++){n+='<tr>';for(let p=0;p<l;p++)n+='<td></td>';n+='</tr>'}n+='\t\t\t\t</tbody>\t\t\t</table>\t\t',c.pasteHtmlAtCaret(n,!0)}),c.uniqueChildButtonFunction=function(g){let h=$(g.currentTarget),k=h.siblings('[child-function]');k.each(function(l,m){c.setInactiveButton(m)})},c.thisToolbarDiv.on('click','[child-selection="unique"] [child-function]',c.uniqueChildButtonFunction),$('[bb-add-remove-tag]').each(function(g,h){let k=$(h).attr('name');c.pollOptionsTemplate[k]=new b('[name="'+k+'"]',1)}),c.thisInputTakerPopUpDiv.on('click','[name="addAnotherField"]',function(g){let h=$(g.target).siblings('[bb-add-remove-tag]'),k=h.attr('name');c.pollOptionsTemplate[k]&&c.pollOptionsTemplate[k].addTemplateToTag()}),c.thisInputTakerPopUpDiv.on('click','[name="removeLastField"]',function(g){let h=$(g.target).siblings('[bb-add-remove-tag]'),k=h.attr('name');c.pollOptionsTemplate[k]&&c.pollOptionsTemplate[k].removeLastTemplateFromTag()}),c.pasteHtmlAtCaret=function(g,h){var k,l;if(!window.getSelection)document.selection&&'Control'!=document.selection.type&&document.selection.createRange().pasteHTML(g);else if(k=window.getSelection(),k.getRangeAt&&k.rangeCount)if(l=k.getRangeAt(0),l.deleteContents(),h){var m=document.createElement('div');m.innerHTML=g;for(var o,p,n=document.createDocumentFragment();o=m.firstChild;)p=n.appendChild(o);l.insertNode(n),p&&(l=l.cloneRange(),l.setStartAfter(p),l.collapse(!0),k.removeAllRanges(),k.addRange(l))}else l.insertNode(g)},c.getSelectionObject=function(){let g={};return window.getSelection?g=window.getSelection():document.selection&&document.selection.createRange&&(g=document.selection.createRange()),g},c.saveSelectionObject=function(){if(window.getSelection){let g=window.getSelection();if(g.getRangeAt&&g.rangeCount){let h=[];for(let k=0,l=g.rangeCount;k<l;++k)h.push(g.getRangeAt(k));return h}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},c.restoreSelectionObject=function(g){if(g)if(window.getSelection){let h=window.getSelection();h.removeAllRanges();for(let k=0,l=g.length;k<l;++k)h.addRange(g[k])}else document.selection&&g.select&&g.select()},c.getTagsInSelection=function(g){let k,l,m,n,h=[];if(window.getSelection){let o=window.getSelection();if(o.getRangeAt&&o.rangeCount){n=document.createRange();for(let p=0;p<o.rangeCount;++p)if(k=o.getRangeAt(p),l=k.commonAncestorContainer,1!=l.nodeType&&(l=l.parentNode),l.nodeName.toLowerCase()==g)h.push(l);else{m=l.getElementsByTagName(g);for(let q=0;q<m.length;++q)n.selectNodeContents(m[q]),1>n.compareBoundaryPoints(k.END_TO_START,k)&&-1<n.compareBoundaryPoints(k.START_TO_END,k)&&h.push(m[q])}n.detach()}}else if(document.selection&&'Control'!=document.selection.type)if(k=document.selection.createRange(),l=k.parentElement(),l.nodeName.toLowerCase()==g)h.push(l);else{m=l.getElementsByTagName(g),n=document.body.createTextRange();for(let o=0;o<m.length;++o)n.moveToElementText(m[o]),-1<n.compareEndPoints('StartToEnd',k)&&1>n.compareEndPoints('EndToStart',k)&&h.push(m[o])}return h},c.getCompressedData=function(g=null){let h=[];if(null==g?(g=c.thisContentEditableDiv,g=$(g)):1==g.nodeType&&(g=$(g)),g[0]&&1==g[0].nodeType&&g.attr('objecttype')){let n={type:'custom',objecttype:g.attr('objecttype'),objectdata:g.attr('objectdata')};return h.push(n),h}if(3==g.nodeType){let n={type:'text',text:g.data};return h.push(n),h}if(0==g.children().length){let n=c.getElementAttributesObject(g[0]),o={type:'defined',tag:g.prop('tagName').toLowerCase(),text:g.text(),attributes:n};return h.push(o),h}let k=c.getElementAttributesObject(g[0]),l={type:'defined',tag:g.prop('tagName').toLowerCase(),attributes:k},m=g.contents();return m.each(function(n,o){if(1==o.nodeType||3==o.nodeType){let p=c.getCompressedData(o);h=h.concat(p)}}),l.children=h,[l]},c.getElementAttributesObject=function(g){let h={},k=['id','contenteditable','contenteditable-family','name','class'];for(let l=0;l<g.attributes.length;l++)-1==k.indexOf(g.attributes[l].name)&&(h[g.attributes[l].name]=g.attributes[l].value);return h}};