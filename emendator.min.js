var smartInputBoxDecoder=function(a,b){let c=function(k){let l={};try{l=JSON.parse(k)}catch(m){l=k}return l},d=function(k){let m='\t\t\t<div class="my-4">\t\t\t\t<div class="row no-gutters">\t\t\t\t\t<div class="offset-md-1 col-md-8 col-12">\t\t\t\t\t\t<div class="pollCreate">\t\t\t\t\t\t\t<form>\t\t\t\t\t\t\t';for(let o=0;o<k.length;o++)m+='\t\t\t\t\t\t\t\t<div class="row my-2">\t\t\t\t\t\t\t\t\t<div class="col-2 bigRadioOuterDiv">\t\t\t\t\t\t\t\t\t\t<button class="bigRadio notSelected" type="button">\t\t\t\t\t\t\t\t\t\t\t<div class="bigRadioDiv">\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<input type="radio" class="bigRadio" name="'+b+'" value="'+(o+1)+'">\t\t\t\t\t\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="col-10">\t\t\t\t\t\t\t\t\t\t<label class="lead" for=\'[name="'+b+'"]\'>'+k[o]+'</label>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t';m+=' \t</form>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t';let n=document.createElement('div');return n.innerHTML=m,n},f=function(k){let m=document.createElement('div');return m.innerHTML='\t\t\t<div class="my-2">\t\t\t\t<img src="'+k+'" class="mainColumnCardImage img-thumbnail">\t\t\t</div>\t\t',m},g=function(k){let m=document.createElement('div');return m.innerHTML='\t\t\t<div class="embed-responsive embed-responsive-16by9 my-4">\t\t\t  <iframe class="embed-responsive-item" src="'+k+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\t\t\t</div>\t\t',m},h=[];return a.forEach(function(k){if('defined'==k.type){let l=document.createElement(k.tag);if(k.attributes)for(let m in k.attributes){let n=document.createAttribute(m);n.value=k.attributes[m],l.setAttributeNode(n)}if(k.text&&(l.innerHTML=k.text),k.children){let m=smartInputBoxDecoder(k.children);m.forEach(function(n){l.appendChild(n)})}if('table'==k.tag.toLowerCase()){let m=document.createElement('div');m.className='table-responsive my-4',l.className='table table-hover table-bordered',m.appendChild(l),l=m}'thead'==k.tag.toLowerCase()&&(l.className='thead-light'),h.push(l)}else if('text'==k.type){let l=document.createTextNode(k.text);h.push(l)}else if('custom'==k.type)if('image'==k.objecttype){let l=f(k.objectdata);h.push(l)}else if('poll'==k.objecttype){let l=d(c(k.objectdata),b);h.push(l)}else if('video'==k.objecttype){let l=g(k.objectdata);h.push(l)}}),h},smartInputBox=function(a,b,c,d){function f(h,k=0){this.thisTemplateParentRef=$(h),this.initializeCounter=k,this.counter=0,this.getTemplatePreparedTemplate=function(){return this.counter+=1,' \t\t\t<div class="input-group mb-3" bb-template-counter="'+this.counter+'"> \t\t\t\t<div class="input-group-append"> \t\t\t\t\t<span class="input-group-text">'+this.counter+'</span> \t\t\t\t</div> \t\t\t\t<input type="text" class="form-control" placeholder="Poll Detail" aria-label="Poll Detail"> \t\t\t</div> \t\t\t'},this.addTemplateToTag=function(){this.thisTemplateParentRef.append(this.getTemplatePreparedTemplate())},this.removeLastTemplateFromTag=function(){this.thisTemplateParentRef.find('[bb-template-counter="'+this.counter+'"]').remove(),this.counter-=1},this.resetTemplateTag=function(){for(this.thisTemplateParentRef.html(''),this.counter=0;this.counter<this.initializeCounter;)this.addTemplateToTag()},this.resetTemplateTag()}document.execCommand('styleWithCSS',null,!0);var g=this;for(let h in g.editorButtons={undoaction:{isCommand:!0,toBeChecked:!0,commandName:'undo'},redoaction:{isCommand:!0,toBeChecked:!0,commandName:'redo'},printaction:{isCommand:!1,toBeChecked:!1,commandName:''},fontStyle:{isCommand:!0,toBeChecked:!0,parameter:!0,commandName:'fontName'},fontSize:{isCommand:!0,toBeChecked:!0,parameter:!0,commandName:'fontSize'},italic:{isCommand:!0,toBeChecked:!0,commandName:'italic'},bold:{isCommand:!0,toBeChecked:!0,commandName:'bold'},underline:{isCommand:!0,toBeChecked:!0,commandName:'underline'},highlight:{isCommand:!1,toBeChecked:!1,surroundTag:!0,tagName:'mark'},subscript:{isCommand:!0,toBeChecked:!0,commandName:'subscript'},superscript:{isCommand:!0,toBeChecked:!0,commandName:'superscript'},addLink:{isCommand:!0,toBeChecked:!1,parameter:!0,upload:!0,commandName:'createLink'},addImage:{isCommand:!0,toBeChecked:!1,parameter:!0,upload:!0,commandName:'insertImage'},addVideo:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},alignLeft:{isCommand:!0,toBeChecked:!0,commandName:'justifyLeft'},alignCenter:{isCommand:!0,toBeChecked:!0,commandName:'justifyCenter'},alignRight:{isCommand:!0,toBeChecked:!0,commandName:'justifyRight'},alignJustify:{isCommand:!0,toBeChecked:!0,commandName:'justifyFull'},textHeight:{isCommand:!1,toBeChecked:!1,commandName:'lineHeight'},orderedListMaker:{isCommand:!0,toBeChecked:!1,commandName:'insertOrderedList'},unorderedListMaker:{isCommand:!0,toBeChecked:!1,commandName:'insertUnorderedList'},indent:{isCommand:!0,toBeChecked:!0,commandName:'indent'},outdent:{isCommand:!0,toBeChecked:!0,commandName:'outdent'},addPoll:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},createTable:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},removeFormatting:{isCommand:!0,toBeChecked:!1,commandName:'removeFormat'}},g.thisParentContainerDiv=$(a),g.thisContentEditableDiv=$(b),g.thisToolbarDiv=$(c),g.thisInputTakerPopUpDiv=$(d),g.thisInputTakerTabs={},g.pollOptionsTemplate={},g.selectionObjectCreatedUser={},g.thisParentContainerDiv.css('position','relative'),g.thisContentEditableDiv.attr('contenteditable','true'),g.thisContentEditableDiv.addClass('inputBox'),g.thisContentEditableDiv.addClass('clearfix'),g.editorButtons)g.editorButtons[h].upload&&(g.thisInputTakerTabs[h]=g.thisInputTakerPopUpDiv.find('.nav-item[name="'+h+'"]'));g.checkForEachButtonToBeActiveAndSetValues=function(){for(let h in g.editorButtons)if(g.editorButtons[h].isCommand&&g.editorButtons[h].toBeChecked&&(document.queryCommandState(g.editorButtons[h].commandName)?g.setActiveButton(g.thisToolbarDiv.find('[child-function="'+h+'"]')):g.setInactiveButton(g.thisToolbarDiv.find('[child-function="'+h+'"]')),g.editorButtons[h].parameter&&document.queryCommandValue(g.editorButtons[h].commandName))){let k=document.queryCommandValue(g.editorButtons[h].commandName);g.thisToolbarDiv.find('[child-function="'+h+'"]').find('[name="getValue"]').val(k)}},g.setOptionValuesForEachButton=function(){},document.onselectionchange=function(){0<g.thisParentContainerDiv.find(':focus').length&&g.checkForEachButtonToBeActiveAndSetValues()},g.checkForKeyPressActionsForDifferentElements=function(h){9==h.keyCode&&(h.preventDefault(),g.isSelectionInsideElementTag('li')?h.shiftKey?document.execCommand('outdent',!1,null):document.execCommand('indent',!1,null):document.execCommand('insertHTML',!1,'&emsp;'))},g.thisContentEditableDiv.on('keydown',function(h){g.checkForKeyPressActionsForDifferentElements(h)}),g.isSelectionInsideElementTag=function(h){var k,l;for(h=h.toUpperCase(),window.getSelection?(k=window.getSelection(),0<k.rangeCount&&(l=k.getRangeAt(0).commonAncestorContainer)):(k=document.selection)&&'Control'!=k.type&&(l=k.createRange().parentElement());l;){if(1==l.nodeType&&l.tagName==h)return!0;if(l=l.parentNode,l&&l.getAttribute&&l.getAttribute('id')==g.thisContentEditableDiv.attr('id'))return!1}return!1},g.thisToolbarDiv.on('click','.inputBoxOption-child',function(h){h.preventDefault();let k=h.currentTarget;g.checkAndSetActive(k,h);$(h.currentTarget)}),g.checkAndSetActive=function(h,k,l=!1){let m=$(h);g.doActionOfReferencedButton(m),m.hasClass('active')&&(l||0==$(k.target).closest('.no-active-trigger').length)?g.setInactiveButton(m):g.setActiveButton(m)},g.setInactiveButton=function(h){let k=$(h);k.removeClass('active')},g.setActiveButton=function(h){let k=$(h);k.addClass('active'),k.hasClass('active-no-stay')&&$(document).on('click',function l(m){0==$(m.target).closest(k).length&&(g.setInactiveButton(k),$(document).off('click',l))})},g.doActionOfReferencedButton=function(h){let k=h.attr('child-function');if(g.editorButtons[k].isCommand&&!0!=g.editorButtons[k].parameter)g.thisContentEditableDiv.focus(),document.execCommand(g.editorButtons[k].commandName,!1,g.editorButtons[k].parameter);else if(g.editorButtons[k].isCommand){if(g.editorButtons[k].upload){g.selectionObjectCreatedUser=g.saveSelectionObject(),g.activateInputTaker(k)}else h.find('[name="getValue"]').on('change',function(l){let m=$(l.target).val();g.thisContentEditableDiv.focus(),document.execCommand(g.editorButtons[k].commandName,!1,m)});}else if(g.editorButtons[k].surroundTag){g.thisContentEditableDiv.focus();let l=g.getSelectionObject();l.getRangeAt(0).surroundContents(document.createElement(g.editorButtons[k].tagName))}else g.selectionObjectCreatedUser=g.saveSelectionObject(),g.activateInputTaker(k)},g.activateInputTaker=function(h){g.editorButtons[h].upload&&(g.thisInputTakerPopUpDiv.find('.modal-loader').removeClass('activate'),g.thisInputTakerTabs[h].tab('show'),g.thisInputTakerPopUpDiv.modal('show'))},g.deactiveInputtaker=function(){g.thisInputTakerPopUpDiv.modal('hide')},g.thisInputTakerPopUpDiv.on('click','button[name="pollOptionsAdd"]',function(h){let k=[],l=$($(h.target).attr('bb-getFrom'));l.find('input').each(function(n,o){k.push($(o).val())}),g.deactiveInputtaker(),g.thisContentEditableDiv.focus(),g.pollOptionsTemplate[l.attr('name')].resetTemplateTag();let m='<br/><br/><div objecttype="poll" objectdata=\''+JSON.stringify(k)+'\' class="editorPollDiv" contenteditable="false"><form>';k.forEach(function(n,o){m+='\t\t\t\t<div optionIndex="'+o+'" class="form-check">\t\t\t\t\t<input type="radio" class="form-check-input" name="inputCheckPoll">\t\t\t\t\t<label class="form-check-label">\t\t\t\t\t\t'+n+'\t\t\t\t\t</label>\t\t\t\t</div>\t\t\t'}),m+='</form></div><br/><br/>',g.restoreSelectionObject(g.selectionObjectCreatedUser),g.pasteHtmlAtCaret(m,!0)}),g.thisParentContainerDiv.on('submit','[name="addLink-form"]',function(h){h.preventDefault(),g.deactiveInputtaker(),g.thisContentEditableDiv.focus();let k=$(h.target).find('[name="getLinkInput"]'),l=k.val();g.restoreSelectionObject(g.selectionObjectCreatedUser),document.execCommand('createLink',!1,l)}),g.thisParentContainerDiv.on('submit','[name="addImage-form"]',function(h){h.preventDefault(),g.deactiveInputtaker(),g.thisContentEditableDiv.focus(),g.restoreSelectionObject(g.selectionObjectCreatedUser);let k=$(h.target).find('[name="image-add-link"]'),l=$(h.target).find('[name="image-file-upload"]');if(1==k.length){let m=k.val();g.pasteHtmlAtCaret('<br/><div class="my-2" contenteditable="false" class="img-thumbnail" objecttype="image" objectdata="'+m+'"><img style="width: 90%;max-width: 300px;" src="'+m+'"></div><br/>',!0)}else if(1==l.length);}),g.thisParentContainerDiv.on('submit','[name="addVideo-form"]',function(h){h.preventDefault(),g.deactiveInputtaker(),g.thisContentEditableDiv.focus(),g.restoreSelectionObject(g.selectionObjectCreatedUser);let k=$(h.target).find('[name="video-add-link"]'),l=$(h.target).find('[name="video-file-upload"]');if(1==k.length){let m=k.val();g.pasteHtmlAtCaret('<br/>\t\t\t\t<div class="my-2 d-flex justify-content-center" contenteditable="false" objecttype="video" objectdata="'+m+'">\t\t\t\t\t<iframe src="'+m+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\t\t\t\t</div>\t\t\t\t<br/>',!0)}else if(1==l.length);}),g.thisParentContainerDiv.on('submit','[name="createTable-form"]',function(h){h.preventDefault(),g.deactiveInputtaker(),g.thisContentEditableDiv.focus(),g.restoreSelectionObject(g.selectionObjectCreatedUser);let k=$(h.target),l=k.find('[name="row"]').val(),m=k.find('[name="column"]').val(),n=k.find('[name="includeHeader"]').is(':checked'),o='\t\t\t<table class="table table-bordered table-editing-hover">\t\t';o+='\t\t\t<thead class="thead-light">\t\t\t\t<tr>\t\t';for(let p=0;p<m;p++)o+='<th></th>';o+='\t\t\t\t</tr>\t\t\t</thead>\t\t',o+='<tbody>';for(let p=0;p<l;p++){o+='<tr>';for(let q=0;q<m;q++)o+='<td></td>';o+='</tr>'}o+='\t\t\t\t</tbody>\t\t\t</table>\t\t',g.pasteHtmlAtCaret(o,!0)}),g.uniqueChildButtonFunction=function(h){let k=$(h.currentTarget),l=k.siblings('[child-function]');l.each(function(m,n){g.setInactiveButton(n)})},g.thisToolbarDiv.on('click','[child-selection="unique"] [child-function]',g.uniqueChildButtonFunction),$('[bb-add-remove-tag]').each(function(h,k){let l=$(k).attr('name');g.pollOptionsTemplate[l]=new f('[name="'+l+'"]',1)}),g.thisInputTakerPopUpDiv.on('click','[name="addAnotherField"]',function(h){let k=$(h.target).siblings('[bb-add-remove-tag]'),l=k.attr('name');g.pollOptionsTemplate[l]&&g.pollOptionsTemplate[l].addTemplateToTag()}),g.thisInputTakerPopUpDiv.on('click','[name="removeLastField"]',function(h){let k=$(h.target).siblings('[bb-add-remove-tag]'),l=k.attr('name');g.pollOptionsTemplate[l]&&g.pollOptionsTemplate[l].removeLastTemplateFromTag()}),g.pasteHtmlAtCaret=function(h,k){var l,m;if(!window.getSelection)document.selection&&'Control'!=document.selection.type&&document.selection.createRange().pasteHTML(h);else if(l=window.getSelection(),l.getRangeAt&&l.rangeCount)if(m=l.getRangeAt(0),m.deleteContents(),k){var n=document.createElement('div');n.innerHTML=h;for(var p,q,o=document.createDocumentFragment();p=n.firstChild;)q=o.appendChild(p);m.insertNode(o),q&&(m=m.cloneRange(),m.setStartAfter(q),m.collapse(!0),l.removeAllRanges(),l.addRange(m))}else m.insertNode(h)},g.getSelectionObject=function(){let h={};return window.getSelection?h=window.getSelection():document.selection&&document.selection.createRange&&(h=document.selection.createRange()),h},g.saveSelectionObject=function(){if(window.getSelection){let h=window.getSelection();if(h.getRangeAt&&h.rangeCount){let k=[];for(let l=0,m=h.rangeCount;l<m;++l)k.push(h.getRangeAt(l));return k}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},g.restoreSelectionObject=function(h){if(h)if(window.getSelection){let k=window.getSelection();k.removeAllRanges();for(let l=0,m=h.length;l<m;++l)k.addRange(h[l])}else document.selection&&h.select&&h.select()},g.getTagsInSelection=function(h){let l,m,n,o,k=[];if(window.getSelection){let p=window.getSelection();if(p.getRangeAt&&p.rangeCount){o=document.createRange();for(let q=0;q<p.rangeCount;++q)if(l=p.getRangeAt(q),m=l.commonAncestorContainer,1!=m.nodeType&&(m=m.parentNode),m.nodeName.toLowerCase()==h)k.push(m);else{n=m.getElementsByTagName(h);for(let s=0;s<n.length;++s)o.selectNodeContents(n[s]),1>o.compareBoundaryPoints(l.END_TO_START,l)&&-1<o.compareBoundaryPoints(l.START_TO_END,l)&&k.push(n[s])}o.detach()}}else if(document.selection&&'Control'!=document.selection.type)if(l=document.selection.createRange(),m=l.parentElement(),m.nodeName.toLowerCase()==h)k.push(m);else{n=m.getElementsByTagName(h),o=document.body.createTextRange();for(let p=0;p<n.length;++p)o.moveToElementText(n[p]),-1<o.compareEndPoints('StartToEnd',l)&&1>o.compareEndPoints('EndToStart',l)&&k.push(n[p])}return k},g.getCompressedData=function(h=null){let k=[];if(null==h?(h=g.thisContentEditableDiv,h=$(h)):1==h.nodeType&&(h=$(h)),h[0]&&1==h[0].nodeType&&h.attr('objecttype')){let o={type:'custom',objecttype:h.attr('objecttype'),objectdata:h.attr('objectdata')};return k.push(o),k}if(3==h.nodeType){let o={type:'text',text:h.data};return k.push(o),k}if(0==h.children().length){let o=g.getElementAttributesObject(h[0]),p={type:'defined',tag:h.prop('tagName').toLowerCase(),text:h.text(),attributes:o};return k.push(p),k}let l=g.getElementAttributesObject(h[0]),m={type:'defined',tag:h.prop('tagName').toLowerCase(),attributes:l},n=h.contents();return n.each(function(o,p){if(1==p.nodeType||3==p.nodeType){let q=g.getCompressedData(p);k=k.concat(q)}}),m.children=k,[m]},g.getElementAttributesObject=function(h){let k={},l=['id','contenteditable','contenteditable-family','name','class'];for(let m=0;m<h.attributes.length;m++)-1==l.indexOf(h.attributes[m].name)&&(k[h.attributes[m].name]=h.attributes[m].value);return k}};