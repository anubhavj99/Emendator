var smartInputBoxDecoder=function(a,b){let c=function(j){let k={};try{k=JSON.parse(j)}catch(l){k=j}return k},d=function(j){let l='\t\t\t<div class="my-4">\t\t\t\t<div class="row no-gutters">\t\t\t\t\t<div class="offset-md-1 col-md-8 col-12">\t\t\t\t\t\t<div class="pollCreate">\t\t\t\t\t\t\t<form>\t\t\t\t\t\t\t';for(let n=0;n<j.length;n++)l+='\t\t\t\t\t\t\t\t<div class="row my-2">\t\t\t\t\t\t\t\t\t<div class="col-2 bigRadioOuterDiv">\t\t\t\t\t\t\t\t\t\t<button class="bigRadio notSelected" type="button">\t\t\t\t\t\t\t\t\t\t\t<div class="bigRadioDiv">\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<input type="radio" class="bigRadio" name="'+b+'" value="'+(n+1)+'">\t\t\t\t\t\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="col-10">\t\t\t\t\t\t\t\t\t\t<label class="lead" for=\'[name="'+b+'"]\'>'+j[n]+'</label>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t';l+=' \t</form>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t';let m=document.createElement('div');return m.innerHTML=l,m},f=function(j){let l=document.createElement('div');return l.innerHTML='\t\t\t<div class="my-2">\t\t\t\t<img src="'+j+'" class="mainColumnCardImage img-thumbnail">\t\t\t</div>\t\t',l},g=function(j){let l=document.createElement('div');return l.innerHTML='\t\t\t<div class="embed-responsive embed-responsive-16by9 my-4">\t\t\t  <iframe class="embed-responsive-item" src="'+j+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\t\t\t</div>\t\t',l},h=[];return a.forEach(function(j){if('defined'==j.type){let k=document.createElement(j.tag);if(j.attributes)for(let l in j.attributes){let m=document.createAttribute(l);m.value=j.attributes[l],k.setAttributeNode(m)}if(j.text&&(k.innerHTML=j.text),j.children){let l=smartInputBoxDecoder(j.children);l.forEach(function(m){k.appendChild(m)})}h.push(k)}else if('text'==j.type){let k=document.createTextNode(j.text);h.push(k)}else if('custom'==j.type)if('image'==j.objecttype){let k=f(j.objectdata);h.push(k)}else if('poll'==j.objecttype){let k=d(c(j.objectdata),b);h.push(k)}else if('video'==j.objecttype){let k=g(j.objectdata);h.push(k)}}),h},smartInputBox=function(a,b,c,d){function f(h,j=0){this.thisTemplateParentRef=$(h),this.initializeCounter=j,this.counter=0,this.getTemplatePreparedTemplate=function(){return this.counter+=1,' \t\t\t<div class="input-group mb-3" bb-template-counter="'+this.counter+'"> \t\t\t\t<div class="input-group-append"> \t\t\t\t\t<span class="input-group-text">'+this.counter+'</span> \t\t\t\t</div> \t\t\t\t<input type="text" class="form-control" placeholder="Poll Detail" aria-label="Poll Detail"> \t\t\t</div> \t\t\t'},this.addTemplateToTag=function(){this.thisTemplateParentRef.append(this.getTemplatePreparedTemplate())},this.removeLastTemplateFromTag=function(){this.thisTemplateParentRef.find('[bb-template-counter="'+this.counter+'"]').remove(),this.counter-=1},this.resetTemplateTag=function(){for(this.thisTemplateParentRef.html(''),this.counter=0;this.counter<this.initializeCounter;)this.addTemplateToTag()},this.resetTemplateTag()}document.execCommand('styleWithCSS',null,!0);var g=this;for(let h in g.editorButtons={undoaction:{isCommand:!0,toBeChecked:!0,commandName:'undo'},redoaction:{isCommand:!0,toBeChecked:!0,commandName:'redo'},printaction:{isCommand:!1,toBeChecked:!1,commandName:''},fontStyle:{isCommand:!0,toBeChecked:!0,parameter:!0,commandName:'fontName'},fontSize:{isCommand:!0,toBeChecked:!0,parameter:!0,commandName:'fontSize'},italic:{isCommand:!0,toBeChecked:!0,commandName:'italic'},bold:{isCommand:!0,toBeChecked:!0,commandName:'bold'},underline:{isCommand:!0,toBeChecked:!0,commandName:'underline'},highlight:{isCommand:!1,toBeChecked:!1,surroundTag:!0,tagName:'mark'},subscript:{isCommand:!0,toBeChecked:!0,commandName:'subscript'},superscript:{isCommand:!0,toBeChecked:!0,commandName:'superscript'},addLink:{isCommand:!0,toBeChecked:!1,parameter:!0,upload:!0,commandName:'createLink'},addImage:{isCommand:!0,toBeChecked:!1,parameter:!0,upload:!0,commandName:'insertImage'},addVideo:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},alignLeft:{isCommand:!0,toBeChecked:!0,commandName:'justifyLeft'},alignCenter:{isCommand:!0,toBeChecked:!0,commandName:'justifyCenter'},alignRight:{isCommand:!0,toBeChecked:!0,commandName:'justifyRight'},alignJustify:{isCommand:!0,toBeChecked:!0,commandName:'justifyFull'},textHeight:{isCommand:!1,toBeChecked:!1,commandName:'lineHeight'},orderedListMaker:{isCommand:!0,toBeChecked:!1,commandName:'insertOrderedList'},unorderedListMaker:{isCommand:!0,toBeChecked:!1,commandName:'insertUnorderedList'},indent:{isCommand:!0,toBeChecked:!0,commandName:'indent'},outdent:{isCommand:!0,toBeChecked:!0,commandName:'outdent'},addPoll:{isCommand:!1,toBeChecked:!1,parameter:!0,upload:!0},removeFormatting:{isCommand:!0,toBeChecked:!1,commandName:'removeFormat'}},g.thisParentContainerDiv=$(a),g.thisContentEditableDiv=$(b),g.thisToolbarDiv=$(c),g.thisInputTakerPopUpDiv=$(d),g.thisInputTakerTabs={},g.pollOptionsTemplate={},g.selectionObjectCreatedUser={},g.thisParentContainerDiv.css('position','relative'),g.thisContentEditableDiv.attr('contenteditable','true'),g.thisContentEditableDiv.addClass('inputBox'),g.thisContentEditableDiv.addClass('clearfix'),g.editorButtons)g.editorButtons[h].upload&&(g.thisInputTakerTabs[h]=g.thisInputTakerPopUpDiv.find('.nav-item[name="'+h+'"]'));g.checkForEachButtonToBeActiveAndSetValues=function(){for(let h in g.editorButtons)if(g.editorButtons[h].isCommand&&g.editorButtons[h].toBeChecked&&(document.queryCommandState(g.editorButtons[h].commandName)?g.setActiveButton(g.thisToolbarDiv.find('[child-function="'+h+'"]')):g.setInactiveButton(g.thisToolbarDiv.find('[child-function="'+h+'"]')),g.editorButtons[h].parameter&&document.queryCommandValue(g.editorButtons[h].commandName))){let j=document.queryCommandValue(g.editorButtons[h].commandName);g.thisToolbarDiv.find('[child-function="'+h+'"]').find('[name="getValue"]').val(j)}},g.setOptionValuesForEachButton=function(){},document.onselectionchange=function(){0<g.thisParentContainerDiv.find(':focus').length&&g.checkForEachButtonToBeActiveAndSetValues()},g.checkForKeyPressActionsForDifferentElements=function(h){9==h.keyCode&&(h.preventDefault(),g.isSelectionInsideElementTag('li')?h.shiftKey?document.execCommand('outdent',!1,null):document.execCommand('indent',!1,null):document.execCommand('insertHTML',!1,'&emsp;'))},g.thisContentEditableDiv.on('keydown',function(h){g.checkForKeyPressActionsForDifferentElements(h)}),g.isSelectionInsideElementTag=function(h){var j,k;for(h=h.toUpperCase(),window.getSelection?(j=window.getSelection(),0<j.rangeCount&&(k=j.getRangeAt(0).commonAncestorContainer)):(j=document.selection)&&'Control'!=j.type&&(k=j.createRange().parentElement());k;){if(1==k.nodeType&&k.tagName==h)return!0;if(k=k.parentNode,k&&k.getAttribute&&k.getAttribute('id')==g.thisContentEditableDiv.attr('id'))return!1}return!1},g.thisToolbarDiv.on('click','.inputBoxOption-child',function(h){h.preventDefault();let j=h.currentTarget;g.checkAndSetActive(j,h);$(h.currentTarget)}),g.checkAndSetActive=function(h,j,k=!1){let l=$(h);g.doActionOfReferencedButton(l),l.hasClass('active')&&(k||0==$(j.target).closest('.no-active-trigger').length)?g.setInactiveButton(l):g.setActiveButton(l)},g.setInactiveButton=function(h){let j=$(h);j.removeClass('active')},g.setActiveButton=function(h){let j=$(h);j.addClass('active'),j.hasClass('active-no-stay')&&$(document).on('click',function k(l){0==$(l.target).closest(j).length&&(g.setInactiveButton(j),$(document).off('click',k))})},g.doActionOfReferencedButton=function(h){let j=h.attr('child-function');if(g.editorButtons[j].isCommand&&!0!=g.editorButtons[j].parameter)g.thisContentEditableDiv.focus(),document.execCommand(g.editorButtons[j].commandName,!1,g.editorButtons[j].parameter);else if(g.editorButtons[j].isCommand){if(g.editorButtons[j].upload){g.selectionObjectCreatedUser=g.saveSelectionObject(),g.activateInputTaker(j)}else h.find('[name="getValue"]').on('change',function(k){let l=$(k.target).val();g.thisContentEditableDiv.focus(),document.execCommand(g.editorButtons[j].commandName,!1,l)});}else if(g.editorButtons[j].surroundTag){g.thisContentEditableDiv.focus();let k=g.getSelectionObject();k.getRangeAt(0).surroundContents(document.createElement(g.editorButtons[j].tagName))}else g.selectionObjectCreatedUser=g.saveSelectionObject(),g.activateInputTaker(j)},g.activateInputTaker=function(h){g.editorButtons[h].upload&&(g.thisInputTakerPopUpDiv.find('.modal-loader').removeClass('activate'),g.thisInputTakerTabs[h].tab('show'),g.thisInputTakerPopUpDiv.modal('show'))},g.deactiveInputtaker=function(){g.thisInputTakerPopUpDiv.modal('hide')},g.thisInputTakerPopUpDiv.on('click','button[name="pollOptionsAdd"]',function(h){let j=[],k=$($(h.target).attr('bb-getFrom'));k.find('input').each(function(m,n){j.push($(n).val())}),g.deactiveInputtaker(),g.thisContentEditableDiv.focus(),g.pollOptionsTemplate[k.attr('name')].resetTemplateTag();let l='<br/><br/><div objecttype="poll" objectdata=\''+JSON.stringify(j)+'\' class="editorPollDiv" contenteditable="false"><form>';j.forEach(function(m,n){l+='\t\t\t\t<div optionIndex="'+n+'" class="form-check">\t\t\t\t\t<input type="radio" class="form-check-input" name="inputCheckPoll">\t\t\t\t\t<label class="form-check-label">\t\t\t\t\t\t'+m+'\t\t\t\t\t</label>\t\t\t\t</div>\t\t\t'}),l+='</form></div><br/><br/>',g.restoreSelectionObject(g.selectionObjectCreatedUser),g.pasteHtmlAtCaret(l,!0)}),g.thisParentContainerDiv.on('submit','[name="addLink-form"]',function(h){h.preventDefault(),g.deactiveInputtaker(),g.thisContentEditableDiv.focus();let j=$(h.target).find('[name="getLinkInput"]'),k=j.val();g.restoreSelectionObject(g.selectionObjectCreatedUser),document.execCommand('createLink',!1,k)}),g.thisParentContainerDiv.on('submit','[name="addImage-form"]',function(h){h.preventDefault(),g.deactiveInputtaker(),g.thisContentEditableDiv.focus(),g.restoreSelectionObject(g.selectionObjectCreatedUser);let j=$(h.target).find('[name="image-add-link"]'),k=$(h.target).find('[name="image-file-upload"]');if(1==j.length){let l=j.val();g.pasteHtmlAtCaret('<br/><div class="my-2" contenteditable="false" class="img-thumbnail" objecttype="image" objectdata="'+l+'"><img style="width: 90%;max-width: 300px;" src="'+l+'"></div><br/>',!0)}else if(1==k.length);}),g.thisParentContainerDiv.on('submit','[name="addVideo-form"]',function(h){h.preventDefault(),g.deactiveInputtaker(),g.thisContentEditableDiv.focus(),g.restoreSelectionObject(g.selectionObjectCreatedUser);let j=$(h.target).find('[name="video-add-link"]'),k=$(h.target).find('[name="video-file-upload"]');if(1==j.length){let l=j.val();g.pasteHtmlAtCaret('<br/>\t\t\t\t<div class="my-2 d-flex justify-content-center" contenteditable="false" objecttype="video" objectdata="'+l+'">\t\t\t\t\t<iframe src="'+l+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\t\t\t\t</div>\t\t\t\t<br/>',!0)}else if(1==k.length);}),g.uniqueChildButtonFunction=function(h){let j=$(h.currentTarget),k=j.siblings('[child-function]');k.each(function(l,m){g.setInactiveButton(m)})},g.thisToolbarDiv.on('click','[child-selection="unique"] [child-function]',g.uniqueChildButtonFunction),$('[bb-add-remove-tag]').each(function(h,j){let k=$(j).attr('name');g.pollOptionsTemplate[k]=new f('[name="'+k+'"]',1)}),g.thisInputTakerPopUpDiv.on('click','[name="addAnotherField"]',function(h){let j=$(h.target).siblings('[bb-add-remove-tag]'),k=j.attr('name');g.pollOptionsTemplate[k]&&g.pollOptionsTemplate[k].addTemplateToTag()}),g.thisInputTakerPopUpDiv.on('click','[name="removeLastField"]',function(h){let j=$(h.target).siblings('[bb-add-remove-tag]'),k=j.attr('name');g.pollOptionsTemplate[k]&&g.pollOptionsTemplate[k].removeLastTemplateFromTag()}),g.pasteHtmlAtCaret=function(h,j){var k,l;if(!window.getSelection)document.selection&&'Control'!=document.selection.type&&document.selection.createRange().pasteHTML(h);else if(k=window.getSelection(),k.getRangeAt&&k.rangeCount)if(l=k.getRangeAt(0),l.deleteContents(),j){var m=document.createElement('div');m.innerHTML=h;for(var o,p,n=document.createDocumentFragment();o=m.firstChild;)p=n.appendChild(o);l.insertNode(n),p&&(l=l.cloneRange(),l.setStartAfter(p),l.collapse(!0),k.removeAllRanges(),k.addRange(l))}else l.insertNode(h)},g.getSelectionObject=function(){let h={};return window.getSelection?h=window.getSelection():document.selection&&document.selection.createRange&&(h=document.selection.createRange()),h},g.saveSelectionObject=function(){if(window.getSelection){let h=window.getSelection();if(h.getRangeAt&&h.rangeCount){let j=[];for(let k=0,l=h.rangeCount;k<l;++k)j.push(h.getRangeAt(k));return j}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},g.restoreSelectionObject=function(h){if(h)if(window.getSelection){let j=window.getSelection();j.removeAllRanges();for(let k=0,l=h.length;k<l;++k)j.addRange(h[k])}else document.selection&&h.select&&h.select()},g.getTagsInSelection=function(h){let k,l,m,n,j=[];if(window.getSelection){let o=window.getSelection();if(o.getRangeAt&&o.rangeCount){n=document.createRange();for(let p=0;p<o.rangeCount;++p)if(k=o.getRangeAt(p),l=k.commonAncestorContainer,1!=l.nodeType&&(l=l.parentNode),l.nodeName.toLowerCase()==h)j.push(l);else{m=l.getElementsByTagName(h);for(let q=0;q<m.length;++q)n.selectNodeContents(m[q]),1>n.compareBoundaryPoints(k.END_TO_START,k)&&-1<n.compareBoundaryPoints(k.START_TO_END,k)&&j.push(m[q])}n.detach()}}else if(document.selection&&'Control'!=document.selection.type)if(k=document.selection.createRange(),l=k.parentElement(),l.nodeName.toLowerCase()==h)j.push(l);else{m=l.getElementsByTagName(h),n=document.body.createTextRange();for(let o=0;o<m.length;++o)n.moveToElementText(m[o]),-1<n.compareEndPoints('StartToEnd',k)&&1>n.compareEndPoints('EndToStart',k)&&j.push(m[o])}return j},g.getCompressedData=function(h=null){let j=[];if(null==h?(h=g.thisContentEditableDiv,h=$(h)):1==h.nodeType&&(h=$(h)),h[0]&&1==h[0].nodeType&&h.attr('objecttype')){let n={type:'custom',objecttype:h.attr('objecttype'),objectdata:h.attr('objectdata')};return j.push(n),j}if(3==h.nodeType){let n={type:'text',text:h.data};return j.push(n),j}if(0==h.children().length){let n=g.getElementAttributesObject(h[0]),o={type:'defined',tag:h.prop('tagName').toLowerCase(),text:h.text(),attributes:n};return j.push(o),j}let k=g.getElementAttributesObject(h[0]),l={type:'defined',tag:h.prop('tagName').toLowerCase(),attributes:k},m=h.contents();return m.each(function(n,o){if(1==o.nodeType||3==o.nodeType){let p=g.getCompressedData(o);j=j.concat(p)}}),l.children=j,[l]},g.getElementAttributesObject=function(h){let j={},k=['id','contenteditable','contenteditable-family','name','class'];for(let l=0;l<h.attributes.length;l++)-1==k.indexOf(h.attributes[l].name)&&(j[h.attributes[l].name]=h.attributes[l].value);return j}};