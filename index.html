<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css">

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

	<title></title>
	<style type="text/css">
		body {
			padding: 20px 2px;
			margin: 0;
			background: #f1f3f6;
			font-family: serif;
		}
		body > div {
			padding: 10px;
			background: #fff;
		}
		@media (min-width: 768px) {
			body {
				padding: 60px;
			}
			body > div {
				padding: 20px;
			}
		}
	</style>
</head>
<body>
	
	<style>

		/* option bar css */
		.inputBoxOptionSet {
			border: 1px solid #aaa;
			border-radius: 2px;
			background: #fff;
			margin-bottom: 10px;
			display: flex;
			justify-content: flex-start;
			overflow-x: scroll;
			padding: 0 15px;
		}
		.inputBoxCombinedSmall .inputBoxOptionSet {
			border-width: 1px 1px 0 1px;
			border-radius: 2px 2px 0 0;
			margin-bottom: 0;
			background: #efefef;
		}
		.inputBoxOptionSet::-webkit-scrollbar {
			display: none;
		}
		.inputBoxOption-child-group {
			border-right: 1px solid #aaa;
			display: flex;
			justify-content: flex-start;
			padding: 3px 5px;
		}
		.inputBoxCombinedSmall .inputBoxOption-child-group {
			border-right: none;
		}
		.inputBoxOption-child {
			position: relative;
			display: flex;
			justify-content: flex-start;
			flex-direction: row-reverse;
			align-items: center;
			background: none;
			border: none;
			/*border-right: 1px solid #888;*/
			margin: 0 1px;
			color: #000000b3;
			cursor: pointer;
			font-size: 16px;
			padding: 0;
			outline: none !important;
			/*font-weight: 600;*/
		}
		.inputBoxOption-child-view .inputBoxOption-input,
		.inputBoxOption-child-view:not(.withInput) {
			padding: 4px 8px;
		}
		.inputBoxOption-child-option ~ .inputBoxOption-child-view:not(.withInput) {
			padding-right: 4px;
		}
		.inputBoxOption-child-option {
			padding: 5px;
		}
		.inputBoxOption-child-option:hover {
			background: #d9d9d9 !important;
		}
		:active .inputBoxOption-child-option:hover,
		.active:not(.noActive) .inputBoxOption-child-option:hover {
			background: #ccc !important;
		}
		.inputBoxOption-child:active,
		.inputBoxOption-child.active:not(.noActive) {
			background: #ddd !important;
			outline: none;
		}
		.inputBoxOption-child:hover,
		.inputBoxOption-child:active,
		.inputBoxOption-child.active:not(.noActive) {
			color: #000000;
		}
		.inputBoxOption-child:hover {
			box-shadow: inset 1px 1px 3px 0 #dfdfdf;
			background: #eee;
		}
		.inputBoxOption-input {
			border: 1px solid transparent;
			background: transparent;
			color: inherit;
			font: inherit;
			padding: 5px 8px;
			outline: none !important;
			font-size: 14px;
			font-weight: 600;
		}
		select.inputBoxOption-input {
			cursor: pointer;
		}
		.inputBoxOption-input:focus {
			/* background: #fff; */
			/* border-color: #0066ff; */
			box-shadow: inset 1px 1px 3px 1px #ddd;
		}
		.inputBoxOption-input[type="text"] {
			width: 80px;
		}
		.inputBoxOption-input[type="number"] {
			width: 50px;
			-moz-appearance: textfield;
		}
		.inputBoxOption-input[type=number]::-webkit-inner-spin-button, 
		.inputBoxOption-input[type=number]::-webkit-outer-spin-button { 
			-webkit-appearance: none; 
		}

		/* content editor box css */
		.inputBox {
			background: #fff;
			position: relative;
			padding: 20px;
			border: 1px solid #aaa;
			box-shadow: 2px 2px 3px 0 #ccc;
			border-radius: 5px;
			cursor: text;
			outline: none;
			caret-color: grey;
			min-height: 100px;
		}
		.inputBoxCombinedSmall .inputBox {
			border-width: 0 1px 1px 1px;
			border-radius: 0 0 2px 2px;
			margin-top: 0;
			box-shadow: none;
		}
		.inputBoxCombinedSmall .inputBox:focus {
			box-shadow: none;
		}
		.inputBox:empty:not(:focus):before {
			display: block;
			font-style: italic;
			color: grey;
			font-size: 16px;
			content: attr(placeholder);
		}
		.inputBox:hover,
		.inputBox:focus {
			box-shadow: 2px 2px 3px 0 #ccc, 2px 2px 5px 1px #aaa;
		}
		ol {
			list-style-type: decimal;
		}
		ol ol {
			list-style-type: lower-roman;
		}
		ol ol ol {
			list-style-type: lower-latin;
		}
		.editorPollDiv {
			padding: 20px;
			background: #eee;
			font-family: monospace !important;
			font-size: 16px;
		}
		.table-editing-hover td:hover,
		.table-editing-hover th:hover {
			box-shadow: inset 1px 1px 5px 2px #ddd;
			background-color: rgba(0,0,0,.075);
		}

		/* input taker modal css */
		.inputTakerBody {
			border: 1px solid #bbb;
			border-radius: 3px;
			padding: 20px;
			min-height: 50%;
			min-width: 70%;
			background: #fff;
			box-shadow: 2px 2px 5px 2px #909090;
		}
		.btn-square {
			border-radius: 2px;
		}
		.center-content-flex {
			display: flex;
			justify-content: center;
		}
		.seperator-text {
			padding: 10px 0;
			color: grey;
			position: relative;
			text-align: center;
			z-index: 0;
		}
		.seperator-text span {
			background: #fff;
			z-index: 1;
			padding: 0 10px;
			font-size: 20px;
			font-style: italic;
			color: var(--secondary);
		}
		.seperator-text:before {
			content: " ";
			border: 0.5px dashed var(--secondary);
			position: absolute;
			top: 50%;
			left: 10%;
			z-index: -1;
			width: 80%;
		}
		.modal-loader {
			display: none;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(255, 255, 255, 0.7);
		}
		.modal-loader.activate {
			display: none;
		}

	</style>

	<div id="contentEditParent">

		<div contenteditable-family="f1" id="content-ed-f1-toolbar">
			<!-- <div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="undoaction">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-undo-alt"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="redoaction">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-redo-alt"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="printaction">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-print"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child active-no-stay" child-function="fontStyle">
					<!- <span class="inputBoxOption-child-option">
						<i class="fa fa-caret-down"></i>
					</span> ->
					<span class="inputBoxOption-child-view withInput">
						<select class="inputBoxOption-input no-active-trigger form-control" type="text" name="getValue" value="Serif">
							<option value="serif" style="font-family: serif;">Serif</option>
							<option value="sans-serif" style="font-family: sans-serif;">Sans-Serif</option>
							<option value="monospace" style="font-family: monospace;">Monospace</option>
						</select>
						<!- <input type="text" class="inputBoxOption-input no-active-trigger" name="" value="Serif" placeholder=""> ->
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child active-no-stay" child-function="fontSize">
					<!- <span class="inputBoxOption-child-option">
						<i class="fa fa-caret-down"></i>
					</span> ->
					<span class="inputBoxOption-child-view withInput">
						<select class="inputBoxOption-input no-active-trigger form-control" name="getValue" type="number">
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3" selected>3 (default)</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
						</select>
						<!- <input type="number" class="inputBoxOption-input no-active-trigger" name="" value="12" placeholder=""> ->
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child" child-function="italic">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-italic"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="bold">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-bold"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="underline">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-underline"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="highlight">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-highlighter"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="subscript">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-subscript"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="superscript">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-superscript"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="addLink">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-link"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="addImage">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-images"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="addVideo">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-video"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group" child-selection="unique">
				<button class="inputBoxOption-child" child-function="alignLeft">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-left"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="alignCenter">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-center"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="alignRight">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-right"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="alignJustify">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-justify"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child" child-function="textHeight">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-text-height"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="unorderedListMaker">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-list-ul"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="orderedListMaker">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-list-ol"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="indent">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-indent"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="outdent">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-outdent"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="addPoll">
					<span class="inputBoxOption-child-view">
						<img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA0OTAuNjY3IDQ5MC42NjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ5MC42NjcgNDkwLjY2NzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiPgo8Zz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBkPSJNMTA1LjUxNSwxNDYuOTg3YzQuNjA4LDMuNjkxLDExLjMwNywyLjk2NSwxNC45OTctMS42NDNjMzAuNjEzLTM4LjE0NCw3Ni4wNzUtNjAuMDExLDEyNC44LTYwLjAxMSAgICAgYzQ4LjcyNSwwLDk0LjE4NywyMS44NjcsMTI0LjgsNjAuMDExYzIuMTEyLDIuNjI0LDUuMjI3LDMuOTg5LDguMzQxLDMuOTg5YzIuMzQ3LDAsNC42OTMtMC43NjgsNi42NTYtMi4zNDcgICAgIGM0LjU4Ny0zLjY5MSw1LjMzMy0xMC40MTEsMS42NDMtMTQuOTk3QzM1Mi4wNjQsODguNzg5LDMwMC41MjMsNjQsMjQ1LjMxMiw2NGMtNTUuMjExLDAtMTA2Ljc3MywyNC43ODktMTQxLjQ0LDY3Ljk4OSAgICAgQzEwMC4xODEsMTM2LjU3NiwxMDAuOTI4LDE0My4yOTYsMTA1LjUxNSwxNDYuOTg3eiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMjg4LDI5OC42NjdjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N3YtNzQuNjY3SDMyMGM1Ljg4OCwwLDEwLjY2Ny00Ljc3OSwxMC42NjctMTAuNjY3UzMyNS44ODgsMTkyLDMyMCwxOTIgICAgIGgtNjRjLTUuODg4LDAtMTAuNjY3LDQuNzc5LTEwLjY2NywxMC42NjdzNC43NzksMTAuNjY3LDEwLjY2NywxMC42NjdoMjEuMzMzVjI4OEMyNzcuMzMzLDI5My44ODgsMjgyLjExMiwyOTguNjY3LDI4OCwyOTguNjY3eiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMTcwLjY2NywyMjR2NDIuNjY3YzAsMTcuNjQzLDE0LjM1NywzMiwzMiwzMmMxNy42NDMsMCwzMi0xNC4zNTcsMzItMzJWMjI0YzAtMTcuNjQzLTE0LjM1Ny0zMi0zMi0zMiAgICAgQzE4NS4wMjQsMTkyLDE3MC42NjcsMjA2LjM1NywxNzAuNjY3LDIyNHogTTIxMy4zMzMsMjI0djQyLjY2N2MwLDUuODg4LTQuNzc5LDEwLjY2Ny0xMC42NjcsMTAuNjY3UzE5MiwyNzIuNTU1LDE5MiwyNjYuNjY3VjIyNCAgICAgYzAtNS44ODgsNC43NzktMTAuNjY3LDEwLjY2Ny0xMC42NjdTMjEzLjMzMywyMTguMTEyLDIxMy4zMzMsMjI0eiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMzYxLjM0NCwzNTUuMzI4Yy0zMC41OTIsMzIuMjM1LTcxLjc4Nyw1MC4wMDUtMTE1Ljk4OSw1MC4wMDVjLTQ0LjIwMywwLTg1LjM5Ny0xNy43NDktMTE1Ljk4OS01MC4wMDUgICAgIGMtNC4wMzItNC4yNjctMTAuNzk1LTQuNDM3LTE1LjA4My0wLjQwNWMtNC4yODgsNC4wNTMtNC40NTksMTAuNzk1LTAuNDA1LDE1LjA4M2MzNC42NDUsMzYuNTQ0LDgxLjM0NCw1Ni42NjEsMTMxLjQ1Niw1Ni42NjEgICAgIHM5Ni44MTEtMjAuMTE3LDEzMS40OTktNTYuNjYxYzQuMDMyLTQuMjg4LDMuODYxLTExLjA1MS0wLjQwNS0xNS4wODNDMzcyLjE2LDM1MC44OTEsMzY1LjM5NywzNTEuMDYxLDM2MS4zNDQsMzU1LjMyOHoiIGZpbGw9IiMwMDAwMDAiLz4KCQkJPHBhdGggZD0iTTI0NS4zMzMsMEMxMTAuMDU5LDAsMCwxMTAuMDU5LDAsMjQ1LjMzM3MxMTAuMDU5LDI0NS4zMzMsMjQ1LjMzMywyNDUuMzMzczI0NS4zMzMtMTEwLjA1OSwyNDUuMzMzLTI0NS4zMzMgICAgIFMzODAuNjA4LDAsMjQ1LjMzMywweiBNMjQ1LjMzMyw0NjkuMzMzYy0xMjMuNTIsMC0yMjQtMTAwLjQ4LTIyNC0yMjRzMTAwLjQ4LTIyNCwyMjQtMjI0czIyNCwxMDAuNDgsMjI0LDIyNCAgICAgUzM2OC44NTMsNDY5LjMzMywyNDUuMzMzLDQ2OS4zMzN6IiBmaWxsPSIjMDAwMDAwIi8+CgkJCTxwYXRoIGQ9Ik0zOTQuNjY3LDI3Ny4zMzNoLTMyVjI1NmgxMC42NjdjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N3MtNC43NzktMTAuNjY3LTEwLjY2Ny0xMC42NjdoLTEwLjY2N3YtMjEuMzMzaDMyICAgICBjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N1M0MDAuNTU1LDE5MiwzOTQuNjY3LDE5MkgzNTJjLTUuODg4LDAtMTAuNjY3LDQuNzc5LTEwLjY2NywxMC42NjdWMjg4ICAgICBjMCw1Ljg4OCw0Ljc3OSwxMC42NjcsMTAuNjY3LDEwLjY2N2g0Mi42NjdjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N1M0MDAuNTU1LDI3Ny4zMzMsMzk0LjY2NywyNzcuMzMzeiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMTE2LjY1MSwyOTEuNzU1bDMyLTg1LjMzM2MyLjA2OS01LjUyNS0wLjcyNS0xMS42NjktNi4yMjktMTMuNzM5Yy01LjU0Ny0yLjA0OC0xMS42NjksMC43MDQtMTMuNzM5LDYuMjI5ICAgICBsLTIyLjAxNiw1OC43MDlsLTIyLjAxNi01OC43MDljLTIuMDY5LTUuNTA0LTguMjEzLTguMjU2LTEzLjczOS02LjIyOWMtNS41MDQsMi4wNjktOC4yOTksOC4yMTMtNi4yMjksMTMuNzM5bDMyLDg1LjMzMyAgICAgYzEuNTU3LDQuMTYsNS41NDcsNi45MTIsOS45ODQsNi45MTJDMTExLjEwNCwyOTguNjY3LDExNS4wOTMsMjk1LjkxNSwxMTYuNjUxLDI5MS43NTV6IiBmaWxsPSIjMDAwMDAwIi8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" />
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="createTable">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-table"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="removeFormatting">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-eraser"></i>
					</span>
				</button>
			</div> -->
		</div>
		
		<div contenteditable-family="f1" id="content-ed-f1">
		</div>

		<div class="modal fade" id="popUpInput" tabindex="-1" role="dialog" aria-labelledby="popUpInput" aria-hidden="true">
			<div class="modal-dialog modal-lg" role="input">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="popUpInputTitle">Upload/Add</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="modal-loader">
						</div>
						<div>
							<div class="nav nav-tabs" id="nav-tab" role="tablist">
								<a class="nav-item nav-link active" id="nav-add-link-tab" data-toggle="tab" href="#nav-add-link" role="tab" aria-controls="nav-add-link" name="addLink">
									Add Link
								</a>
								<a class="nav-item nav-link" id="nav-upload-image-tab" data-toggle="tab" href="#nav-upload-image" role="tab" aria-controls="nav-upload-image" name="addImage">
									Upload Image
								</a>
								<a class="nav-item nav-link" id="nav-upload-video-tab" data-toggle="tab" href="#nav-upload-video" role="tab" aria-controls="nav-upload-video" name="addVideo">
									Upload Video
								</a>
								<a class="nav-item nav-link" id="nav-add-poll-tab" data-toggle="tab" href="#nav-add-poll" role="tab" aria-controls="nav-add-poll" name="addPoll">
									Add Poll
								</a>
								<a class="nav-item nav-link" id="nav-create-table-tab" data-toggle="tab" href="#nav-create-table" role="tab" aria-controls="nav-create-table" name="createTable">
									Create Table
								</a>
							</div>
						</div>
						<div class="tab-content" id="nav-tabContent">
							<div class="tab-pane fade show active" id="nav-add-link" role="tabpanel">
								<form class="m-2" name="addLink-form">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text"><i class="fa fa-link"></i></span>
											</div>
											<label class="sr-only">Please enter a link</label>
											<input type="text" class="form-control" name="getLinkInput" placeholder="Enter link" spellcheck="false" required>
										</div>
										<small class="form-text text-muted">Pro Tip: Avoid putting <b>https://</b> or <b>http://</b> in the links.</small>
									</div>
									<div class="center-content-flex">
										<button type="submit" class="btn btn-warning btn-square mb-2">Add Link</button>
									</div>
								</form>
							</div>
							<div class="tab-pane fade" id="nav-upload-image" role="tabpanel">
								<form class="m-2" name="addImage-form">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text"><i class="fa fa-link"></i></span>
											</div>
											<label class="sr-only">Please enter a link</label>
											<input type="text" class="form-control" name="image-add-link" placeholder="Enter link" spellcheck="false" required>
										</div>
										<small class="form-text text-muted">Only https:// links would work for inserting images</small>
									</div>
									<div class="center-content-flex">
										<button type="submit" class="btn btn-warning btn-square mb-2">Add Link</button>
									</div>
								</form>
									<div class="seperator-text">
										<span>OR</span>
									</div>
								<form class="m-2" name="addImage-form">
									<div class="form-group mb-3">
										<input type="file" class="form-control" id="imageUploadFile" name="image-file-upload" accept="image/*" required>
										<div class="invalid-feedback">Please provide a valid file</div>
									</div>
									<div class="center-content-flex">	
										<button type="submit" class="btn btn-info btn-square mb-2">Upload Image</button>
									</div>
								</form>
							</div>
							<div class="tab-pane fade" id="nav-upload-video" role="tabpanel">
								<form class="m-2" name="addVideo-form">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text"><i class="fa fa-link"></i></span>
											</div>
											<label class="sr-only">Please enter a link</label>
											<input type="text" class="form-control" name="video-add-link" placeholder="Enter link" spellcheck="false" required>
										</div>
										<small class="form-text text-muted">Only https:// links would work for inserting images</small>
									</div>
									<div class="center-content-flex">
										<button type="submit" class="btn btn-warning btn-square mb-2">Add Link</button>
									</div>
								</form>

									<div class="seperator-text">
										<span>OR</span>
									</div>
								<form class="m-2" name="addVideo-form">
									<div class="form-group mb-3">
										<input type="file" class="form-control" id="videoUploadFile" name="video-file-upload" accept="video/*" required>
										<div class="invalid-feedback">Please provide a valid file</div>
									</div>
									<div class="center-content-flex">	
										<button type="submit" class="btn btn-info btn-square mb-2">Upload Video</button>
									</div>
								</form>
							</div>
							<div class="tab-pane fade" id="nav-add-poll" role="tabpanel">
								<div class="p-3">
									<div name="addInputPolls" id="getPollInputField" class="mb-2" bb-add-remove-tag>
										<!-- <div class="input-group mb-3">
											<div class="input-group-append">
												<span class="input-group-text">1</span>
											</div>
											<input type="text" class="form-control" placeholder="Poll Detail" aria-label="Poll Detail">
										</div> -->
									</div>
									<button class="btn btn-secondary btn-sm btn-square" name="addAnotherField">Add another field</button>
									<button class="btn btn-danger btn-sm btn-square" name="removeLastField">Remove last feild</button>
								</div>
								<div class="center-content-flex">	
									<button class="btn btn-info btn-square" name="pollOptionsAdd" bb-getFrom="#getPollInputField">Add Poll</button>
								</div>
							</div>
							<div class="tab-pane fade" id="nav-create-table" role="tabpanel">
								<div class="p-3">
									<form name="createTable-form">
										<div class="row">
											<div class="col">
												<label class="sr-only" for="row">Rows</label>
												<div class="input-group mb-2">
													<div class="input-group-prepend">
														<div class="input-group-text">Rows</div>
													</div>
													<input type="text" class="form-control" placeholder="Rows" name="row" required>
												</div>
											</div>
											<div class="col">
												<label class="sr-only" for="column">Columns</label>
												<div class="input-group mb-2">
													<div class="input-group-prepend">
														<div class="input-group-text">Columns</div>
													</div>
													<input type="text" class="form-control" placeholder="Columns" name="column" required>
												</div>
											</div>
										</div>
										<div class="row mt-2">
											<div class="col">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" name="includeHeader" checked>
													<label class="form-check-label h5" for="autoSizingCheck">
														Include Headers in table
													</label>
												</div>
										    </div>
										</div>
										<div class="center-content-flex mt-2">	
											<button class="btn btn-info btn-square" type="submit">Create Table</button>
										</div>
									</form>
								</div>
								<div class="center-content-flex">	
									
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success font-weight-bold font-italic" data-dismiss="modal">Done</button>
					</div>
				</div>
		 	</div>
		</div>
	</div>
	<button name="clickconsole">Click me</button>

	<link rel="stylesheet" href="http://bookbox.in/assets/css/postCardStyle.css">
	<script src="http://bookbox.in/assets/js/postCardStyle.js" type="text/javascript" charset="utf-8"></script>

	<!-- <script src="emendator.min.js" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" href="emendator.min.css"> -->

	<script type="text/javascript">

		$(function(){
			var editor = new smartInputBox({
				parentContainerId: '#contentEditParent',
				editorDivId: '#content-ed-f1',
				toolbarDivId: '#content-ed-f1-toolbar',
				inputTakerPopUpId: '#popUpInput',
				isCompactContainer: true,
				placeholder: 'The pen is mightier than the sword!',
				toolbarOptions: {
					'undoaction': true,
					'redoaction': true,
					'printaction': true,
					'fontStyle': true,
					'fontSize': true,
					'italic': true,
					'bold': true,
					'underline': true,
					'highlight': true,
					'subscript': true,
					'superscript': true,
					'addLink': true,
					'addImage': true,
					'addVideo': true,
					'alignLeft': true,
					'alignCenter': true,
					'alignRight': true,
					'alignJustify': true,
					'textHeight': true,
					'orderedListMaker': true,
					'unorderedListMaker': true,
					'indent': true,
					'outdent': true,
					'addPoll': true,
					'createTable': true,
					'removeFormatting': true,
				},
			});
			$('[name="clickconsole"]').on('click', function() {
				let xcode = editor.getCompressedData()
				console.log(xcode)
				let xPush = smartInputBoxDecoder(xcode, "qwerty")
				console.log(xPush)
				$('body').append(xPush)
			})
		});

		// the decoder for the storage json object to be converted html object
		var smartInputBoxDecoder = function(contentData, postId) {
			// define all functions
			// function returns json parsed object if the string is json else the string itself
			let ifJsonParseElseReturn = function(str) {
				let retVal = new Object()
				try {
					// statements
					retVal = JSON.parse(str)
				} catch(e) {
					// statements
					// console.log(e);
					retVal = str
				}
				return retVal
			}

			let pollCreator = function(pollData, pollId) {
				let createdHtml = '\
					<div class="my-4">\
						<div class="row no-gutters">\
							<div class="offset-md-1 col-md-8 col-12">\
								<div class="pollCreate">\
									<form>\
									';
									for(let i=0; i<pollData.length; i++) {
										createdHtml += '\
										<div class="row my-2">\
											<div class="col-2 bigRadioOuterDiv">\
												<button class="bigRadio notSelected" type="button">\
													<div class="bigRadioDiv">\
													</div>\
													<input type="radio" class="bigRadio" name="' + postId + '" value="' + (i+1) + '">\
												</button>\
											</div>\
											<div class="col-10">\
												<label class="lead" for=\'[name="' + postId + '"]\'>' + pollData[i] + '</label>\
											</div>\
										</div>\
										';
									}
				createdHtml += ' 	</form>\
								</div>\
							</div>\
						</div>\
					</div>\
				';

				let pollObjEl = document.createElement('div')
				pollObjEl.innerHTML = createdHtml

				return pollObjEl
			}

			let imageElCreator = function(imgSrc) {
				let createdHtml= '\
					<div class="my-2">\
						<img src="' + imgSrc + '" class="mainColumnCardImage img-thumbnail">\
					</div>\
				';

				let imgObjEl = document.createElement('div')
				imgObjEl.innerHTML = createdHtml

				return imgObjEl
			}

			let videoElCreator = function(videoSrc) {
				let createdHtml= '\
					<div class="embed-responsive embed-responsive-16by9 my-4">\
					  <iframe class="embed-responsive-item" src="' + videoSrc + '" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\
					</div>\
				';

				let imgObjEl = document.createElement('div')
				imgObjEl.innerHTML = createdHtml

				return imgObjEl
			}

			// iterate over all objects
			let formedObjectList = []
			contentData.forEach(function(el) {
				// create element for predefined functions
				if(el.type == 'defined') {
					let tagObj = document.createElement(el.tag)
					// set attributes if any
					if(el.attributes) {
						for(let attribute in el.attributes) {
							let att = document.createAttribute(attribute);
							att.value = el.attributes[attribute];
							tagObj.setAttributeNode(att);
						}
					}
					// set text value if any
					if(el.text) {
						tagObj.innerHTML = el.text
					}
					// iterate for children of the defined tag
					if(el.children) {
						let childElementSet = smartInputBoxDecoder(el.children)
						childElementSet.forEach(function(childElObj) {
							tagObj.appendChild(childElObj)
						})
					}

					// define classes and respnsiveness for table
					if(el.tag.toLowerCase() == 'table') {
						let surroundingDivEl = document.createElement('div')
						surroundingDivEl.className = 'table-responsive my-4'
						tagObj.className = 'table table-hover table-bordered'
						surroundingDivEl.appendChild(tagObj)
						tagObj = surroundingDivEl
					}
					if(el.tag.toLowerCase() == 'thead') {
						tagObj.className = 'thead-light'
					}

					// add element to the list
					formedObjectList.push(tagObj)
				}
				else if(el.type == 'text') {
					let textObj = document.createTextNode(el.text);
					formedObjectList.push(textObj)
				}
				else if(el.type == 'custom') {
					if(el.objecttype == 'image') {
						let imgObj = imageElCreator(el.objectdata)
						formedObjectList.push(imgObj)
					}
					else if(el.objecttype == 'poll') {
						let pollObj = pollCreator(ifJsonParseElseReturn(el.objectdata), postId)
						formedObjectList.push(pollObj)
					}
					else if(el.objecttype == 'video') {
						let videoObj = videoElCreator(el.objectdata)
						formedObjectList.push(videoObj)
					}
				}


			});

			return formedObjectList

		}

		// gives the html node for the toolbar on the basis of the options provided
		// par1: the object with options that are to be set as keys and their respective values to be true
		var smartInputBoxToolbarCreator = function(OptionsToBeIncluded) {
			let toolbarHtmlText = ''

			// CHECK FOR EACH CHILD GROUP
			// THEN CHECK FOR EACH ELEMENT IN IT
			// ADD THE HTML AND PARSE AT LAST TO RETURN THE CREATED NODE ELEMENT
			

			if(OptionsToBeIncluded.undoaction || OptionsToBeIncluded.redoaction || OptionsToBeIncluded.printaction) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.undoaction) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="undoaction">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-undo-alt"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.redoaction) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="redoaction">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-redo-alt"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.printaction) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="printaction">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-print"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'

			}


			if(OptionsToBeIncluded.fontStyle || OptionsToBeIncluded.fontSize) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.fontStyle) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child active-no-stay" child-function="fontStyle">\
							<span class="inputBoxOption-child-view withInput">\
								<select class="inputBoxOption-input no-active-trigger form-control" type="text" name="getValue" value="Serif">\
									<option value="serif" style="font-family: serif;">Serif</option>\
									<option value="sans-serif" style="font-family: sans-serif;">Sans-Serif</option>\
									<option value="monospace" style="font-family: monospace;">Monospace</option>\
								</select>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.fontSize) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child active-no-stay" child-function="fontSize">\
							<span class="inputBoxOption-child-view withInput">\
								<select class="inputBoxOption-input no-active-trigger form-control" name="getValue" type="number">\
									<option value="1">1</option>\
									<option value="2">2</option>\
									<option value="3" selected>3 (Default)</option>\
									<option value="4">4</option>\
									<option value="5">5</option>\
									<option value="6">6</option>\
									<option value="7">7</option>\
								</select>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'

			}


			if(OptionsToBeIncluded.italic || OptionsToBeIncluded.bold || OptionsToBeIncluded.underline || OptionsToBeIncluded.highlight || OptionsToBeIncluded.subscript || OptionsToBeIncluded.superscript) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.italic) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="italic">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-italic"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.bold) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="bold">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-bold"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.underline) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="underline">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-underline"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.highlight) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="highlight">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-highlighter"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.subscript) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="subscript">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-subscript"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.superscript) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="superscript">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-superscript"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'

			}


			if(OptionsToBeIncluded.addLink || OptionsToBeIncluded.addImage || OptionsToBeIncluded.addVideo) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.addLink) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="addLink">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-link"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.addImage) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="addImage">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-images"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.addVideo) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="addVideo">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-video"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'

			}

			// UNIQUE CHILD IN THIS, THIS THE EXTRA ATTRIBUTE IN PARENT
			if(OptionsToBeIncluded.alignLeft || OptionsToBeIncluded.alignCenter || OptionsToBeIncluded.alignRight || OptionsToBeIncluded.alignJustify) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group" child-selection="unique">'

				if(OptionsToBeIncluded.alignLeft) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="alignLeft">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-align-left"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.alignCenter) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="alignCenter">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-align-center"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.alignRight) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="alignRight">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-align-right"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.alignJustify) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="alignJustify">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-align-justify"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'

			}


			if(OptionsToBeIncluded.textHeight) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.textHeight) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child" child-function="textHeight">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-text-height"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'
			}


			if(OptionsToBeIncluded.unorderedListMaker || OptionsToBeIncluded.orderedListMaker || OptionsToBeIncluded.indent || OptionsToBeIncluded.outdent) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.unorderedListMaker) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="unorderedListMaker">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-list-ul"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.orderedListMaker) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="orderedListMaker">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-list-ol"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.indent) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="indent">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-indent"></i>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.outdent) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="outdent">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-outdent"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'

			}


			if(OptionsToBeIncluded.addPoll || OptionsToBeIncluded.createTable) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.addPoll) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="addPoll">\
							<span class="inputBoxOption-child-view">\
								<img src="pollIcon.svg" alt="Poll Icon"/>\
							</span>\
						</button>\
					';
				}

				if(OptionsToBeIncluded.createTable) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="createTable">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-table"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'
			}


			if(OptionsToBeIncluded.removeFormatting) {
				toolbarHtmlText += 	'<div class="inputBoxOption-child-group">'

				if(OptionsToBeIncluded.removeFormatting) {
					toolbarHtmlText += '\
						<button class="inputBoxOption-child noActive" child-function="removeFormatting">\
							<span class="inputBoxOption-child-view">\
								<i class="fa fa-eraser"></i>\
							</span>\
						</button>\
					';
				}

				toolbarHtmlText += 	'</div>'
			}

			// return the parsed html from string
			return $.parseHTML(toolbarHtmlText)

		}

		// this is the code for input box
		// it is a class based code
		// initialize it with constructor values and voila!
		var smartInputBox = function(initializerParamSet) {

			// parentContainerId, editorDivId, toolbarDivId, inputTakerPopUpId, toolbarOptions

			document.execCommand('styleWithCSS', null, true)

			var _this_main = this;

			// editor tabs
			_this_main.editorButtons = {
				'undoaction': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'undo',
				},
				'redoaction': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'redo',
				},
				'printaction': {
					'isCommand': false,
					'toBeChecked': false,
					'commandName': '',
				},
				'fontStyle': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'toBeChecked': true,
					'commandName': 'fontName',
				},
				'fontSize': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'toBeChecked': true,
					'commandName': 'fontSize',
				},
				'italic': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'italic',
				},
				'bold': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'bold',
				},
				'underline': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'underline',
				},
				'highlight': {
					'isCommand': false,
					'toBeChecked': false,
					'surroundTag': true,
					'tagName': 'mark',
				},
				'subscript': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'subscript',
				},
				'superscript': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'superscript',
				},
				'addLink': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'upload': true,
					'commandName': 'createLink',
				},
				'addImage': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'upload': true,
					'commandName': 'insertImage',
				},
				'addVideo': {					// parameter
					'isCommand': false,
					'toBeChecked': false,
					'parameter': true,
					'upload': true,
				},
				'alignLeft': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyLeft',
				},
				'alignCenter': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyCenter',
				},
				'alignRight': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyRight',
				},
				'alignJustify': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyFull',
				},
				'textHeight': {
					'isCommand': false,
					'toBeChecked': false,
					'commandName': 'lineHeight',
				},
				'orderedListMaker': {
					'isCommand': true,
					'toBeChecked': false,
					'commandName': 'insertOrderedList',
				},
				'unorderedListMaker': {
					'isCommand': true,
					'toBeChecked': false,
					'commandName': 'insertUnorderedList',
				},
				'indent': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'indent',
				},
				'outdent': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'outdent',
				},
				'addPoll': {
					'isCommand': false,
					'toBeChecked': false,
					'parameter': true,
					'upload': true,
				},
				'createTable': {
					'isCommand': false,
					'toBeChecked': false,
					'parameter': true,
					'upload': true,
				},
				'removeFormatting': {
					'isCommand': true,
					'toBeChecked': false,
					'commandName': 'removeFormat',
				},
			};
			
			_this_main.thisParentContainerDiv = $(initializerParamSet.parentContainerId)
			_this_main.thisContentEditableDiv = $(initializerParamSet.editorDivId)
			_this_main.thisToolbarDiv = $(initializerParamSet.toolbarDivId)
			_this_main.thisInputTakerPopUpDiv = $(initializerParamSet.inputTakerPopUpId)
			_this_main.thisInputTakerTabs = new Object()
			_this_main.pollOptionsTemplate = new Object()
			_this_main.selectionObjectCreatedUser = new Object()

			// (enableObjectResizing) call command in beginning

			// put necessary properties in the basic references
			_this_main.thisParentContainerDiv.css('position', 'relative');
			_this_main.thisContentEditableDiv.attr('contenteditable', 'true');
			_this_main.thisContentEditableDiv.empty();
			_this_main.thisContentEditableDiv.addClass('inputBox')
			_this_main.thisContentEditableDiv.addClass('clearfix')
			_this_main.thisToolbarDiv.addClass('inputBoxOptionSet')
			// if the input is to be smaller
			if(initializerParamSet.isCompactContainer)
				_this_main.thisParentContainerDiv.addClass('inputBoxCombinedSmall')
			if(initializerParamSet.placeholder)
			{
				_this_main.thisContentEditableDiv.attr('placeholder', initializerParamSet.placeholder)
			}

			// make the toolbar and append all the included options in the paramset
			addToolbarOptions = ( initializerParamSet.toolbarOptions && Object.keys(initializerParamSet.toolbarOptions).length > 0) ? initializerParamSet.toolbarOptions : _this_main.editorButtons;
			_this_main.thisToolbarDiv.append(smartInputBoxToolbarCreator(addToolbarOptions))

			// set the tabs div reference
			for(let editorKey in _this_main.editorButtons) {

				if(_this_main.editorButtons[editorKey]['upload'])
				{
					// console.log(_this_main.thisInputTakerPopUpDiv.find('.nav-item[name="' + editorKey + '"]'))
					_this_main.thisInputTakerTabs[editorKey] = _this_main.thisInputTakerPopUpDiv.find('.nav-item[name="' + editorKey + '"]')
				}
			
			}

			_this_main.thisContentEditableDiv.on('paste', function(event) {
				console.log(event)
				event.stopPropagation();
				event.preventDefault();
				let clipboardData = event.originalEvent.clipboardData || window.clipboardData;
				let pastedData = clipboardData.getData('text/plain');
				let pastedDataTextArray = pastedData.split('\n')
				for(let i=1; i<pastedDataTextArray.length; i++) {
					pastedDataTextArray[i] = '<div>'.concat(pastedDataTextArray[i].concat('</div>'))
				}

				_this_main.pasteHtmlAtCaret(pastedDataTextArray.join(''), true)

			})

			_this_main.checkForEachButtonToBeActiveAndSetValues = function() {

				// let boldButtonJsRef = thisOptionSet.find('[child-function="bold"]');
				for(let propertyFunction in _this_main.editorButtons) {
					if(_this_main.editorButtons[propertyFunction]['isCommand'] && _this_main.editorButtons[propertyFunction]['toBeChecked'])
					{
						// console.log(propertyFunction, _this_main.editorButtons[propertyFunction]['commandName'], _this_main.thisToolbarDiv.find('[child-function="' + propertyFunction + '"]'))
						if(document.queryCommandState(_this_main.editorButtons[propertyFunction]['commandName']))
						{
							// console.log(propertyFunction)	
							_this_main.setActiveButton(_this_main.thisToolbarDiv.find('[child-function="' + propertyFunction + '"]'))
						}
						else
						{
							_this_main.setInactiveButton(_this_main.thisToolbarDiv.find('[child-function="' + propertyFunction + '"]'))
						}

						if(_this_main.editorButtons[propertyFunction]['parameter'] && document.queryCommandValue(_this_main.editorButtons[propertyFunction]['commandName']))
						{
							// console.log(_this_main.editorButtons[propertyFunction]['commandName'], document.queryCommandValue(_this_main.editorButtons[propertyFunction]['commandName']))
							let valueSet = document.queryCommandValue(_this_main.editorButtons[propertyFunction]['commandName'])
							_this_main.thisToolbarDiv.find('[child-function="' + propertyFunction + '"]').find('[name="getValue"]').val(valueSet)
						}
					}

				}

			}

			_this_main.setOptionValuesForEachButton = function() {

			}

			document.onselectionchange = function(event) {
				if(_this_main.thisParentContainerDiv.find(':focus').length > 0)
				{
					_this_main.checkForEachButtonToBeActiveAndSetValues()
				}
			};

			_this_main.checkForKeyPressActionsForDifferentElements = function(event) {
				if(event.keyCode == 9)
				{
					event.preventDefault();
					// console.log("sdfs")
					if(_this_main.isSelectionInsideElementTag('li'))
					{
						if(event.shiftKey)
							document.execCommand('outdent', false, null);
						else
							document.execCommand('indent', false, null);
					}
					else
					{
						document.execCommand('insertHTML', false, '&emsp;')
					}
				}
			}

			_this_main.thisContentEditableDiv.on('keydown', function(event){
				_this_main.checkForKeyPressActionsForDifferentElements(event)
			})

			_this_main.isSelectionInsideElementTag = function(tagName) {
				var sel, containerNode;
				tagName = tagName.toUpperCase();
				if (window.getSelection)
				{
					sel = window.getSelection();
					if (sel.rangeCount > 0)
					{
						containerNode = sel.getRangeAt(0).commonAncestorContainer;
					}
				}
				else if ( (sel = document.selection) && sel.type != "Control" )
				{
				    containerNode = sel.createRange().parentElement();
				}
				while (containerNode)
				{
				    if (containerNode.nodeType == 1 && containerNode.tagName == tagName)
				    {
				        return true;
				    }
				    containerNode = containerNode.parentNode;
				    if(containerNode && containerNode.getAttribute && containerNode.getAttribute('id') == _this_main.thisContentEditableDiv.attr('id'))
				    {
				    	return false;
				    }
				}
				return false;
			}

			_this_main.thisToolbarDiv.on('click', '.inputBoxOption-child', function(event) {
				event.preventDefault();
				let buttonChildRef = event.currentTarget;
				_this_main.checkAndSetActive(buttonChildRef, event);
				let buttonChildJsRef = $(event.currentTarget)
				// let eventName = "content.edit." + buttonChildJsRef.attr('child-function')
				// $('.inputBox[contenteditable-family="' + buttonChildJsRef.closest('.inputBoxOptionSet').attr('contenteditable-family') + '"]').focus()
				// buttonChildJsRef.closest('.inputBoxOptionSet').trigger()
			});

			_this_main.checkAndSetActive = function(currentButton, event, isUsingJs=false)
			{
				let clickedOptionButtonJsref = $(currentButton);
				// activate/deactivate all its functionalities
				_this_main.doActionOfReferencedButton(clickedOptionButtonJsref)

				if(clickedOptionButtonJsref.hasClass('active') && (isUsingJs || $(event.target).closest('.no-active-trigger').length == 0)) 
					_this_main.setInactiveButton(clickedOptionButtonJsref)
				else
					_this_main.setActiveButton(clickedOptionButtonJsref)
			}

			// set the button inactive in the toolbar
			_this_main.setInactiveButton = function(clickedOptionButton) {
				let clickedOptionButtonJsref = $(clickedOptionButton)
				clickedOptionButtonJsref.removeClass('active')
			}

			// set the button active in the toolbar
			_this_main.setActiveButton = function(clickedOptionButton) {
				let clickedOptionButtonJsref = $(clickedOptionButton)
				clickedOptionButtonJsref.addClass('active')
				if(clickedOptionButtonJsref.hasClass('active-no-stay'))
				{
					// console.log("active-no-stay")
					$(document).on('click', function closeOnOutOfFocus(ev){
						if($(ev.target).closest(clickedOptionButtonJsref).length == 0)
						{
							_this_main.setInactiveButton(clickedOptionButtonJsref);
							$(document).off('click', closeOnOutOfFocus)
						}
					})
				}
			}

			// execute the action of the button clicked in the option bar
			// the parameters in the editorTab array define how the execution is to be processed for each button
			_this_main.doActionOfReferencedButton = function(clickedOptionButtonJsref) {
				// put focus on the text box
				_this_main.thisContentEditableDiv.focus();

				let actionProp = clickedOptionButtonJsref.attr('child-function')

				if(_this_main.editorButtons[actionProp]['isCommand'] && _this_main.editorButtons[actionProp]['parameter'] != true)
				{
					// console.log(actionProp, _this_main.editorButtons[actionProp])
					document.execCommand(_this_main.editorButtons[actionProp]['commandName'], false, _this_main.editorButtons[actionProp]['parameter']);
				}
				// with parameter default command
				else if(_this_main.editorButtons[actionProp]['isCommand'])
				{
					if(_this_main.editorButtons[actionProp]['upload'])
					{
						let parameter = "";
						_this_main.selectionObjectCreatedUser = _this_main.saveSelectionObject()

						_this_main.activateInputTaker(actionProp)
						// document.execCommand(_this_main.editorButtons[actionProp]['commandName'], false, parameter);
					}
					else
					{
						clickedOptionButtonJsref.find('[name="getValue"]').on('change', function(event) {
							let parameter = $(event.target).val();
							// console.log(_this_main.editorButtons[actionProp]['commandName'], parameter)
							document.execCommand(_this_main.editorButtons[actionProp]['commandName'], false, parameter);
						})
					}
				}
				else if(_this_main.editorButtons[actionProp]['surroundTag']) {
					let selObj = _this_main.getSelectionObject()

					selObj.getRangeAt(0).surroundContents(document.createElement(_this_main.editorButtons[actionProp]['tagName']))

				}
				else {
					_this_main.selectionObjectCreatedUser = _this_main.saveSelectionObject()

					_this_main.activateInputTaker(actionProp)
				}
			}

			// activate input taker div and activate tab as per request
			// the tabs are of bootstrap4 and can be activated by .tab('show')
			_this_main.activateInputTaker = function(actionProp) {
				if(_this_main.editorButtons[actionProp]['upload']) {
					_this_main.thisInputTakerPopUpDiv.find('.modal-loader').removeClass('activate')
					// console.log(_this_main.thisInputTakerTabs[actionProp])
					// activate tab
					_this_main.thisInputTakerTabs[actionProp].tab('show')
					_this_main.thisInputTakerPopUpDiv.modal('show');
				}
				else {

				}
			}
			// deactivate the input taker popup
			_this_main.deactiveInputtaker = function() {
				_this_main.thisInputTakerPopUpDiv.modal('hide');
			}

			// console.log(_this_main.pollOptionsTemplate)

			// capture the forms in the upload popup commands

			// capture the adding of polls options
			// add the html on the caret position and add 2 breaks before and after it
			_this_main.thisInputTakerPopUpDiv.on('click', 'button[name="pollOptionsAdd"]', function(event) {
				let optionValueSet = []
				let addRemoveTagRef = $($(event.target).attr('bb-getFrom'))
				addRemoveTagRef.find('input').each(function(index, el) {
					optionValueSet.push($(el).val())
				});
				_this_main.deactiveInputtaker()
				_this_main.thisContentEditableDiv.focus();
				
				_this_main.pollOptionsTemplate[addRemoveTagRef.attr('name')].resetTemplateTag()

				let pollEl = '<br/><br/><div objecttype="poll" objectdata=\'' + JSON.stringify(optionValueSet) + '\' class="editorPollDiv" contenteditable="false"><form>';

				optionValueSet.forEach( function(element, index) {
					// statements
					let pollOptionEl = '\
						<div optionIndex="' + index + '" class="form-check">\
							<input type="radio" class="form-check-input" name="inputCheckPoll">\
							<label class="form-check-label">\
								' + element + '\
							</label>\
						</div>\
					';
					pollEl += pollOptionEl
				});
				pollEl += '</form></div><br/><br/>'
				// restore selection point
				_this_main.restoreSelectionObject(_this_main.selectionObjectCreatedUser)
				// add it to the editable div
				_this_main.pasteHtmlAtCaret(pollEl, true)

			})

			// capture the form submit for adding hyper link to selection
			// restore the previously captured selection and execute command on it
			_this_main.thisParentContainerDiv.on('submit', '[name="addLink-form"]', function(event) {
				event.preventDefault()
				_this_main.deactiveInputtaker()
				_this_main.thisContentEditableDiv.focus();
				let thisFormInputForLinkJsRef = $(event.target).find('[name="getLinkInput"]')
				let linkVal = thisFormInputForLinkJsRef.val()
				_this_main.restoreSelectionObject(_this_main.selectionObjectCreatedUser)
				document.execCommand('createLink', false, linkVal)
				/*let anchorEl = $('<a/>').attr('href', linkVal).get(0)
				_this_main.selectionObjectCreatedUser.getRangeAt(0).surroundContents(anchorEl)*/
			})

			// capture the submission of the image addition form for the upload popup container
			// take the image link from the link input or upload the image and generate a link for the same
			_this_main.thisParentContainerDiv.on('submit', '[name="addImage-form"]', function(event) {
				event.preventDefault()
				_this_main.deactiveInputtaker()
				_this_main.thisContentEditableDiv.focus();
				// put the caret in original position
				_this_main.restoreSelectionObject(_this_main.selectionObjectCreatedUser)

				let thisFormInputForLinkJsRef = $(event.target).find('[name="image-add-link"]')
				let thisFormInputForFileJsRef = $(event.target).find('[name="image-file-upload"]')
				if(thisFormInputForLinkJsRef.length == 1) {
					let linkVal = thisFormInputForLinkJsRef.val()
					let imageHtml = '<br/><div class="my-2" contenteditable="false" class="img-thumbnail" objecttype="image" objectdata="' + linkVal + '"><img style="width: 90%;max-width: 300px;" src="' + linkVal + '"></div><br/>'
					// console.log(imageHtml)
					_this_main.pasteHtmlAtCaret(imageHtml, true)
				}
				else if(thisFormInputForFileJsRef.length == 1){
					// add code for upload and put link
				}
			})

			// capture the submission of the video addition form for the upload popup container
			// take the video link from the link input or upload the video and generate a link for the same
			_this_main.thisParentContainerDiv.on('submit', '[name="addVideo-form"]', function(event) {
				event.preventDefault()
				_this_main.deactiveInputtaker()
				_this_main.thisContentEditableDiv.focus();

				_this_main.restoreSelectionObject(_this_main.selectionObjectCreatedUser)

				let thisFormInputForLinkJsRef = $(event.target).find('[name="video-add-link"]')
				let thisFormInputForFileJsRef = $(event.target).find('[name="video-file-upload"]')
				if(thisFormInputForLinkJsRef.length == 1) {
					let linkVal = thisFormInputForLinkJsRef.val()
					let videoHtml = '<br/>\
						<div class="my-2 d-flex justify-content-center" contenteditable="false" objecttype="video" objectdata="' + linkVal + '">\
							<iframe src="' + linkVal + '" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>\
						</div>\
						<br/>'
					// console.log(videoHtml)
					_this_main.pasteHtmlAtCaret(videoHtml, true)
				}
				else if(thisFormInputForFileJsRef.length == 1){
					// add code for upload and put link
				}
			})

			// capture the create table event
			// create the table with the row and column count specified
			_this_main.thisParentContainerDiv.on('submit', '[name="createTable-form"]', function(event) {
				event.preventDefault();
				_this_main.deactiveInputtaker()
				_this_main.thisContentEditableDiv.focus();
				_this_main.restoreSelectionObject(_this_main.selectionObjectCreatedUser)

				let thisFormRef = $(event.target)
				let rowCount = thisFormRef.find('[name="row"]').val()
				let columnCount = thisFormRef.find('[name="column"]').val()
				let isHeadertoBeIncluded = thisFormRef.find('[name="includeHeader"]').is(':checked')


				let createdTableHtml = '\
					<table class="table table-bordered table-editing-hover">\
				';

				createdTableHtml += '\
					<thead class="thead-light">\
						<tr>\
				';
				for(let j=0; j<columnCount; j++) {
					createdTableHtml += '<th></th>';
				}
				createdTableHtml += '\
						</tr>\
					</thead>\
				';
				
				createdTableHtml += '<tbody>'
				for(let i=0; i<rowCount; i++) {
					createdTableHtml += '<tr>';
					for(let j=0; j<columnCount; j++) {
						createdTableHtml += '<td></td>';
					}
					createdTableHtml += '</tr>';
				}
				createdTableHtml += '\
						</tbody>\
					</table>\
				';
				_this_main.pasteHtmlAtCaret(createdTableHtml, true)

			})


			// define all ui changing and initalizing functions

			// function for unqiue child selection in the option bar. eg. the alignment buttons
			_this_main.uniqueChildButtonFunction = function(event) {
				let currentButtonJsRef = $(event.currentTarget);
				let buttonGroupSet = currentButtonJsRef.siblings('[child-function]');
				buttonGroupSet.each(function(index, el) {
					_this_main.setInactiveButton(el)
				});

			}
			_this_main.thisToolbarDiv.on('click', '[child-selection="unique"] [child-function]', _this_main.uniqueChildButtonFunction);

			// initialize all add and remove tags for ui
			$('[bb-add-remove-tag]').each(function(index, el) {
				let elName = $(el).attr('name')
				_this_main.pollOptionsTemplate[elName] = new addTagTemplate('[name="' + elName + '"]', 1)
			});
			// add field on click of button
			_this_main.thisInputTakerPopUpDiv.on('click', '[name="addAnotherField"]', function (event) {
				let addToDiv = $(event.target).siblings('[bb-add-remove-tag]')
				let addToDivName = addToDiv.attr('name')
				// console.log(_this_main.pollOptionsTemplate[addToDivName])
				if(_this_main.pollOptionsTemplate[addToDivName]) {
					_this_main.pollOptionsTemplate[addToDivName].addTemplateToTag()
				}
				else {
					// console.log('404 error: please refresh the page.')
				}
			})
			// remove field on click of button
			_this_main.thisInputTakerPopUpDiv.on('click', '[name="removeLastField"]', function (event) {
				let removeFromDiv = $(event.target).siblings('[bb-add-remove-tag]')
				let removeFromDivName = removeFromDiv.attr('name')
				// console.log(_this_main.pollOptionsTemplate[removeFromDivName])
				if(_this_main.pollOptionsTemplate[removeFromDivName]) {
					_this_main.pollOptionsTemplate[removeFromDivName].removeLastTemplateFromTag()
				}
				else {
					// console.log('404 error: please refresh the page.')
				}
			})

			
			/*function createLink() {
			    // There's actually no need to save and restore the selection here. This is just an example.
			    var savedSel = saveSelectionObject();
			    var url = document.getElementById("url").value;
			    restoreSelectionObject(savedSel);
			    document.execCommand("CreateLink", false, url);
			    var links = getTagsInSelection('a');
			    for (var i = 0; i < links.length; ++i) {
			        links[i].style.fontWeight = "bold";
			    }
			}*/

			// defining all classes

			// class for adding the variable number of inputs
			// par1: the reference for where the tag is to appended
			// par2: the initialize count for the number of inputs, default: 0
			function addTagTemplate(templateParentRef, initializeCount=0) {
				this.thisTemplateParentRef = $(templateParentRef)
				this.initializeCounter = initializeCount
				this.counter = 0;
				
				this.getTemplatePreparedTemplate = function() {
					this.counter += 1
					return ' \
					<div class="input-group mb-3" bb-template-counter="' + this.counter + '"> \
						<div class="input-group-append"> \
							<span class="input-group-text">' + this.counter + '</span> \
						</div> \
						<input type="text" class="form-control" placeholder="Poll Detail" aria-label="Poll Detail"> \
					</div> \
					';
				}

				this.addTemplateToTag = function() {
					this.thisTemplateParentRef.append(this.getTemplatePreparedTemplate())
				}

				this.removeLastTemplateFromTag = function() {
					this.thisTemplateParentRef.find('[bb-template-counter="' + this.counter + '"]').remove()
					this.counter -= 1
				}

				this.resetTemplateTag = function() {
					this.thisTemplateParentRef.html('')
					this.counter = 0
					for(; this.counter<this.initializeCounter; ) {
						this.addTemplateToTag()
					}					
				}

				// reset the tab for initialization
				this.resetTemplateTag()
			}

			// define all contenteditable caret modfying code

			// par1: the html to be inserted at caret node
			// par2: is the html passed a string or html object
			_this_main.pasteHtmlAtCaret = function(html, isString) {
			    var sel, range;
				if (window.getSelection) {
					// IE9 and non-IE
					sel = window.getSelection();
					if (sel.getRangeAt && sel.rangeCount) {
						range = sel.getRangeAt(0);
						range.deleteContents();

						// Range.createContextualFragment() would be useful here but is
						// non-standard and not supported in all browsers (IE9, for one)
						if(isString) {
							var el = document.createElement("div");
								el.innerHTML = html;
								var frag = document.createDocumentFragment(), node, lastNode;
								while ( (node = el.firstChild) ) {
									lastNode = frag.appendChild(node);
								}
								range.insertNode(frag);
								
								// Preserve the selection
								if (lastNode) {
									range = range.cloneRange();
									range.setStartAfter(lastNode);
									range.collapse(true);
									sel.removeAllRanges();
									sel.addRange(range);
								}
						}
						else {
							range.insertNode(html);
						}
					}
				} else if (document.selection && document.selection.type != "Control") {
				    // IE < 9
				    document.selection.createRange().pasteHTML(html);
				}
			}

			// get the selection object for the current seletion
			// gives the caret incase of no selection
			_this_main.getSelectionObject = function() {
				let textObject = new Object();
			    if (window.getSelection) {
			        textObject = window.getSelection();
			    } else if (document.selection && document.selection.createRange ) {
					textObject = document.selection.createRange();
			    }
			    return textObject;
			}

			_this_main.saveSelectionObject = function() {
				if (window.getSelection) {
					let sel = window.getSelection();
					if (sel.getRangeAt && sel.rangeCount) {
						let ranges = [];
						for (let i = 0, len = sel.rangeCount; i < len; ++i) {
						 	ranges.push(sel.getRangeAt(i));
						}
						return ranges;
					}
				} else if (document.selection && document.selection.createRange) {
					return document.selection.createRange();
				}
				return null;
			}

			_this_main.restoreSelectionObject = function(savedSel) {
				if (savedSel) {
					if (window.getSelection) {
						let sel = window.getSelection();
						sel.removeAllRanges();
						for (let i = 0, len = savedSel.length; i < len; ++i) {
						 	sel.addRange(savedSel[i]);
						}
					} else if (document.selection && savedSel.select) {
						savedSel.select();
					}
				}
			}

			_this_main.getTagsInSelection = function(tagName) {
				let selectedTags = [];
				let range, containerEl, links, linkRange;
				if (window.getSelection) {
					let sel = window.getSelection();
					if (sel.getRangeAt && sel.rangeCount) {
						linkRange = document.createRange();
						for (let r = 0; r < sel.rangeCount; ++r) {
							range = sel.getRangeAt(r);
							containerEl = range.commonAncestorContainer;
							if (containerEl.nodeType != 1) {
								containerEl = containerEl.parentNode;
							}
							if (containerEl.nodeName.toLowerCase() == tagName) {
								selectedTags.push(containerEl);
							}
							else {
								links = containerEl.getElementsByTagName(tagName);
								for (let i = 0; i < links.length; ++i) {
									linkRange.selectNodeContents(links[i]);
									if (linkRange.compareBoundaryPoints(range.END_TO_START, range) < 1 && linkRange.compareBoundaryPoints(range.START_TO_END, range) > -1) {
										selectedTags.push(links[i]);
									}
								}
							}
						}
						linkRange.detach();
					}
				} else if (document.selection && document.selection.type != "Control") {
					range = document.selection.createRange();
					containerEl = range.parentElement();
					if (containerEl.nodeName.toLowerCase() == tagName) {
						selectedTags.push(containerEl);
					}
					else {
						links = containerEl.getElementsByTagName(tagName);
						linkRange = document.body.createTextRange();
						for (let i = 0; i < links.length; ++i) {
							linkRange.moveToElementText(links[i]);
							if (linkRange.compareEndPoints("StartToEnd", range) > -1 && linkRange.compareEndPoints("EndToStart", range) < 1) {
								selectedTags.push(links[i]);
							} 
						}
					}
				}
				return selectedTags;
			}

			// get the compressed data for storage of the input taker
			// IMP: NO parameter is needed for this. The above parameter has been used for recursion!
			_this_main.getCompressedData = function(containerDiv=null) {
				let htmlContainerArray = []

				if(containerDiv == null) {
					containerDiv = _this_main.thisContentEditableDiv
					containerDiv = $(containerDiv)
				}
				else if(containerDiv.nodeType == 1) {
					containerDiv = $(containerDiv)
				}

				// check if the container is a custom addition
				if(containerDiv[0] && containerDiv[0].nodeType == 1 && containerDiv.attr('objecttype')) {
					let elObj = {
						'type': 'custom',
						'objecttype': containerDiv.attr('objecttype'),
						'objectdata': containerDiv.attr('objectdata'),
					}
					htmlContainerArray.push(elObj)
					return htmlContainerArray;

				}
				// check if the container is text type object
				else if(containerDiv.nodeType == 3) {
					let elObj = {
						'type': 'text',
						'text': containerDiv.data,
					}
					htmlContainerArray.push(elObj)
					return htmlContainerArray;
				}
				// check if container has no children
				else if(containerDiv.children().length == 0) {
					let containerDivAttributes = _this_main.getElementAttributesObject(containerDiv[0])

					let elObj = {
						'type': 'defined',
						'tag': containerDiv.prop('tagName').toLowerCase(),
						'text': containerDiv.text(),
						// 'style': containerDivStyle,
						'attributes': containerDivAttributes,
					}
					htmlContainerArray.push(elObj)
					return htmlContainerArray;
				}
				
				// else container has children nodes, consider every node including text nodes and elemtn nodes

				let containerDivAttributes = _this_main.getElementAttributesObject(containerDiv[0])
				let elObj = {
					'type': 'defined',
					'tag': containerDiv.prop('tagName').toLowerCase(),
					// 'style': containerDivStyle,
					'attributes': containerDivAttributes,
				}

				let containerContents = containerDiv.contents()
				containerContents.each(function(index, el) {

					if(el.nodeType == 1 || el.nodeType == 3)
					{
						let returnedElForNode = _this_main.getCompressedData(el)
						htmlContainerArray = htmlContainerArray.concat(returnedElForNode)
					}

				});
				elObj['children'] = htmlContainerArray

				return [elObj];
			}

			// pass the DOM ref of the element, NOT the jquery ref
			// returns an object of all attributes of the element
			_this_main.getElementAttributesObject = function(elObj) {
				let containerDivAttributes = {}
				// define all attributes which do not need to be included in the compressed dataset
				let notNeededAttributes = ['id', 'contenteditable', 'contenteditable-family', 'name', 'class']
				// generate attributes object
				for(let i=0; i<elObj.attributes.length; i++) {
					// console.log(elObj.attributes[i].name)
					if( notNeededAttributes.indexOf(elObj.attributes[i].name) == -1 )
						containerDivAttributes[elObj.attributes[i].name] = elObj.attributes[i].value
				}

				return containerDivAttributes
			}

		}


		/*function gatherAndStoreTextObjectForTheContentEditable(event) {

			let textObject = new Object();

		    if (window.getSelection) {
		        textObject = window.getSelection();
		    } else if (document.selection && document.selection.createRange ) {
				textObject = document.selection.createRange();
		    }

		    selectedTextObjectSet[$(event.currentTarget).attr('contenteditable-family')] = textObject;

		}

		function getSelectionObject() {
			let textObject = new Object();
		    if (window.getSelection) {
		        textObject = window.getSelection();
		    } else if (document.selection && document.selection.createRange ) {
				textObject = document.selection.createRange();
		    }
		    return textObject;
		}

		function activateActionOfButton(clickedOptionButtonJsref) {
			let textObject = getSelectionObject()
		    if(textObject.type == 'Caret') {
				console.log(textObject.getRangeAt(0))
				let rangeCaretObj = textObject.getRangeAt(0);

				let rangeSet = document.createRange()
				// rangeSet.setStart(rangeCaretObj.startContainer, rangeCaretObj.startOffset);
				$('<span/>').html("wer").appendTo(rangeCaretObj.startContainer)
				// rangeSet.selectNode(el)

		    } else {

			    let nodeRanges = getSafeRanges(textObject.getRangeAt(0))
			    console.log(nodeRanges)
				if(clickedOptionButtonJsref.attr('child-function') == "bold") {

					for( let i=0; i<nodeRanges.length; i++) {

						let boldEl = document.createElement('span')
						$(boldEl).css('font-weight', '600');
						nodeRanges[i].surroundContents(boldEl);
					}
				}
				
		    }

		}

		// $('.inputBox').on('keydown', function(event) {
		// 	console.log(event.keyCode)

		// })

		function getSafeRanges(dangerous) {
		    var a = dangerous.commonAncestorContainer;
		    // Starts -- Work inward from the start, selecting the largest safe range
		    var s = new Array(0), rs = new Array(0);
		    if (dangerous.startContainer != a) 
		    {
		        for(var i = dangerous.startContainer; i != a; i = i.parentNode) 
		        {
		            s.push(i)
		        }
		    }
		    if (0 < s.length) for(var i = 0; i < s.length; i++) {
		        var xs = document.createRange();
		        if (i) {
		            xs.setStartAfter(s[i-1]);
		            xs.setEndAfter(s[i].lastChild);
		        }
		        else {
					xs.setStart(s[i], dangerous.startOffset);
					xs.setEndAfter( (s[i].nodeType == Node.TEXT_NODE) ? s[i] : s[i].lastChild);
		        }
		        rs.push(xs);
		    }

		    // Ends -- basically the same code reversed
		    var e = new Array(0), re = new Array(0);
		    if (dangerous.endContainer != a)
		        for(var i = dangerous.endContainer; i != a; i = i.parentNode)
		            e.push(i);
		    if (0 < e.length) for(var i = 0; i < e.length; i++) {
		        var xe = document.createRange();
		        if (i) {
		            xe.setStartBefore(e[i].firstChild);
		            xe.setEndBefore(e[i-1]);
		        }
		        else {
					xe.setStartBefore( (e[i].nodeType == Node.TEXT_NODE) ? e[i] : e[i].firstChild );
					xe.setEnd(e[i], dangerous.endOffset);
		        }
		        re.unshift(xe);
		    }

		    // Middle -- the uncaptured middle
		    if ((0 < s.length) && (0 < e.length)) {
		        var xm = document.createRange();
		        xm.setStartAfter(s[s.length - 1]);
		        xm.setEndBefore(e[e.length - 1]);
		    }
		    else {
		        return [dangerous];
		    }

		    // Concat
		    rs.push(xm);
		    response = rs.concat(re);    

		    // Send to Console
		    return response;
		}*/

	</script>
</body>
</html>