<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css">

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

	<title></title>
	<style type="text/css">
		* {
			font-family: inherit;
		}
		body {
			padding: 20px 2px;
			margin: 0;
			background: #f1f3f6;
			font-family: serif;
		}
		body > div {
			padding: 10px;
			background: #eee;
		}
		@media (min-width: 768px) {
			body {
				padding: 60px;
			}
			body > div {
				padding: 20px;
			}
		}
	</style>
</head>
<body>
	<div id="contentEditParent">

		<style type="text/css" media="screen">

			.inputBoxOptionSet {
				border: 1px solid #aaa;
				border-radius: 2px;
				background: #fff;
				margin-bottom: 10px;
				display: flex;
				justify-content: flex-start;
				overflow-x: scroll;
				padding: 0 15px;
			}
			.inputBoxOptionSet::-webkit-scrollbar {
				display: none;
			}
			.inputBoxOption-child-group {
				border-right: 1px solid #aaa;
				display: flex;
				justify-content: flex-start;
				padding: 3px 5px;
			}
			.inputBoxOption-child {
				position: relative;
				display: flex;
				justify-content: flex-start;
				flex-direction: row-reverse;
				align-items: center;
				background: none;
				border: none;
				/*border-right: 1px solid #888;*/
				margin: 0 1px;
				color: #000000b3;
				cursor: pointer;
				font-size: 16px;
				padding: 0;
				outline: none !important;
				/*font-weight: 600;*/
			}
			.inputBoxOption-child-view .inputBoxOption-input,
			.inputBoxOption-child-view:not(.withInput) {
				padding: 4px 8px;
			}
			.inputBoxOption-child-option ~ .inputBoxOption-child-view:not(.withInput) {
				padding-right: 4px;
			}
			.inputBoxOption-child-option {
				padding: 5px;
			}
			.inputBoxOption-child-option:hover {
				background: #d9d9d9 !important;
			}
			:active .inputBoxOption-child-option:hover,
			.active:not(.noActive) .inputBoxOption-child-option:hover {
				background: #ccc !important;
			}
			.inputBoxOption-child:active,
			.inputBoxOption-child.active:not(.noActive) {
				background: #ddd !important;
				outline: none;
			}
			.inputBoxOption-child:hover,
			.inputBoxOption-child:active,
			.inputBoxOption-child.active:not(.noActive) {
				color: #000000;
			}
			.inputBoxOption-child:hover {
				box-shadow: inset 1px 1px 3px 0 #dfdfdf;
				background: #eee;
			}
			.inputBoxOption-input {
				border: 1px solid transparent;
				background: transparent;
				color: inherit;
				font: inherit;
				padding: 5px 8px;
				outline: none !important;
				font-size: 14px;
				font-weight: 600;
			}
			select.inputBoxOption-input {
				cursor: pointer;
			}
			.inputBoxOption-input:focus {
				/* background: #fff; */
				/* border-color: #0066ff; */
				box-shadow: inset 1px 1px 3px 1px #ddd;
			}
			.inputBoxOption-input[type="text"] {
				width: 80px;
			}
			.inputBoxOption-input[type="number"] {
				width: 50px;
				-moz-appearance: textfield;
			}
			.inputBoxOption-input[type=number]::-webkit-inner-spin-button, 
			.inputBoxOption-input[type=number]::-webkit-outer-spin-button { 
				-webkit-appearance: none; 
			}
		</style>

		<div class="inputBoxOptionSet" contenteditable-family="f1" id="content-ed-f1-toolbar">
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="undoaction">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-undo-alt"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="redoaction">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-redo-alt"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="printaction">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-print"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child active-no-stay" child-function="fontStyle">
					<!-- <span class="inputBoxOption-child-option">
						<i class="fa fa-caret-down"></i>
					</span> -->
					<span class="inputBoxOption-child-view withInput">
						<select class="inputBoxOption-input no-active-trigger" type="text" name="" value="Serif">
							<option value="Serif">Serif</option>
							<option value="Sans-Serif">Sans-Serif</option>
						</select>
						<!-- <input type="text" class="inputBoxOption-input no-active-trigger" name="" value="Serif" placeholder=""> -->
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child active-no-stay" child-function="fontSize">
					<!-- <span class="inputBoxOption-child-option">
						<i class="fa fa-caret-down"></i>
					</span> -->
					<span class="inputBoxOption-child-view withInput">
						<select class="inputBoxOption-input no-active-trigger" name="" value="14" type="number">
							<option value="10">10</option>
							<option value="12">12</option>
							<option value="14">14</option>
							<option value="16">16</option>
							<option value="20">20</option>
							<option value="24">24</option>
							<option value="28">28</option>
							<option value="32">32</option>
						</select>
						<!-- <input type="number" class="inputBoxOption-input no-active-trigger" name="" value="12" placeholder=""> -->
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child" child-function="italic">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-italic"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="bold">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-bold"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="underline">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-underline"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="highlight">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-highlighter"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child" child-function="addLink">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-link"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="addImage">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-images"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group" child-selection="unique">
				<button class="inputBoxOption-child" child-function="alignLeft">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-left"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="alignCenter">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-center"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="alignRight">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-right"></i>
					</span>
				</button>
				<button class="inputBoxOption-child" child-function="alignJustify">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-align-justify"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child" child-function="textHeight">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-text-height"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="unorderedListMaker">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-list-ul"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="orderedListMaker">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-list-ol"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="indent">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-indent"></i>
					</span>
				</button>
				<button class="inputBoxOption-child noActive" child-function="outdent">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-outdent"></i>
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child" child-function="addPoll">
					<span class="inputBoxOption-child-view">
						<img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA0OTAuNjY3IDQ5MC42NjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ5MC42NjcgNDkwLjY2NzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiPgo8Zz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBkPSJNMTA1LjUxNSwxNDYuOTg3YzQuNjA4LDMuNjkxLDExLjMwNywyLjk2NSwxNC45OTctMS42NDNjMzAuNjEzLTM4LjE0NCw3Ni4wNzUtNjAuMDExLDEyNC44LTYwLjAxMSAgICAgYzQ4LjcyNSwwLDk0LjE4NywyMS44NjcsMTI0LjgsNjAuMDExYzIuMTEyLDIuNjI0LDUuMjI3LDMuOTg5LDguMzQxLDMuOTg5YzIuMzQ3LDAsNC42OTMtMC43NjgsNi42NTYtMi4zNDcgICAgIGM0LjU4Ny0zLjY5MSw1LjMzMy0xMC40MTEsMS42NDMtMTQuOTk3QzM1Mi4wNjQsODguNzg5LDMwMC41MjMsNjQsMjQ1LjMxMiw2NGMtNTUuMjExLDAtMTA2Ljc3MywyNC43ODktMTQxLjQ0LDY3Ljk4OSAgICAgQzEwMC4xODEsMTM2LjU3NiwxMDAuOTI4LDE0My4yOTYsMTA1LjUxNSwxNDYuOTg3eiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMjg4LDI5OC42NjdjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N3YtNzQuNjY3SDMyMGM1Ljg4OCwwLDEwLjY2Ny00Ljc3OSwxMC42NjctMTAuNjY3UzMyNS44ODgsMTkyLDMyMCwxOTIgICAgIGgtNjRjLTUuODg4LDAtMTAuNjY3LDQuNzc5LTEwLjY2NywxMC42NjdzNC43NzksMTAuNjY3LDEwLjY2NywxMC42NjdoMjEuMzMzVjI4OEMyNzcuMzMzLDI5My44ODgsMjgyLjExMiwyOTguNjY3LDI4OCwyOTguNjY3eiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMTcwLjY2NywyMjR2NDIuNjY3YzAsMTcuNjQzLDE0LjM1NywzMiwzMiwzMmMxNy42NDMsMCwzMi0xNC4zNTcsMzItMzJWMjI0YzAtMTcuNjQzLTE0LjM1Ny0zMi0zMi0zMiAgICAgQzE4NS4wMjQsMTkyLDE3MC42NjcsMjA2LjM1NywxNzAuNjY3LDIyNHogTTIxMy4zMzMsMjI0djQyLjY2N2MwLDUuODg4LTQuNzc5LDEwLjY2Ny0xMC42NjcsMTAuNjY3UzE5MiwyNzIuNTU1LDE5MiwyNjYuNjY3VjIyNCAgICAgYzAtNS44ODgsNC43NzktMTAuNjY3LDEwLjY2Ny0xMC42NjdTMjEzLjMzMywyMTguMTEyLDIxMy4zMzMsMjI0eiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMzYxLjM0NCwzNTUuMzI4Yy0zMC41OTIsMzIuMjM1LTcxLjc4Nyw1MC4wMDUtMTE1Ljk4OSw1MC4wMDVjLTQ0LjIwMywwLTg1LjM5Ny0xNy43NDktMTE1Ljk4OS01MC4wMDUgICAgIGMtNC4wMzItNC4yNjctMTAuNzk1LTQuNDM3LTE1LjA4My0wLjQwNWMtNC4yODgsNC4wNTMtNC40NTksMTAuNzk1LTAuNDA1LDE1LjA4M2MzNC42NDUsMzYuNTQ0LDgxLjM0NCw1Ni42NjEsMTMxLjQ1Niw1Ni42NjEgICAgIHM5Ni44MTEtMjAuMTE3LDEzMS40OTktNTYuNjYxYzQuMDMyLTQuMjg4LDMuODYxLTExLjA1MS0wLjQwNS0xNS4wODNDMzcyLjE2LDM1MC44OTEsMzY1LjM5NywzNTEuMDYxLDM2MS4zNDQsMzU1LjMyOHoiIGZpbGw9IiMwMDAwMDAiLz4KCQkJPHBhdGggZD0iTTI0NS4zMzMsMEMxMTAuMDU5LDAsMCwxMTAuMDU5LDAsMjQ1LjMzM3MxMTAuMDU5LDI0NS4zMzMsMjQ1LjMzMywyNDUuMzMzczI0NS4zMzMtMTEwLjA1OSwyNDUuMzMzLTI0NS4zMzMgICAgIFMzODAuNjA4LDAsMjQ1LjMzMywweiBNMjQ1LjMzMyw0NjkuMzMzYy0xMjMuNTIsMC0yMjQtMTAwLjQ4LTIyNC0yMjRzMTAwLjQ4LTIyNCwyMjQtMjI0czIyNCwxMDAuNDgsMjI0LDIyNCAgICAgUzM2OC44NTMsNDY5LjMzMywyNDUuMzMzLDQ2OS4zMzN6IiBmaWxsPSIjMDAwMDAwIi8+CgkJCTxwYXRoIGQ9Ik0zOTQuNjY3LDI3Ny4zMzNoLTMyVjI1NmgxMC42NjdjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N3MtNC43NzktMTAuNjY3LTEwLjY2Ny0xMC42NjdoLTEwLjY2N3YtMjEuMzMzaDMyICAgICBjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N1M0MDAuNTU1LDE5MiwzOTQuNjY3LDE5MkgzNTJjLTUuODg4LDAtMTAuNjY3LDQuNzc5LTEwLjY2NywxMC42NjdWMjg4ICAgICBjMCw1Ljg4OCw0Ljc3OSwxMC42NjcsMTAuNjY3LDEwLjY2N2g0Mi42NjdjNS44ODgsMCwxMC42NjctNC43NzksMTAuNjY3LTEwLjY2N1M0MDAuNTU1LDI3Ny4zMzMsMzk0LjY2NywyNzcuMzMzeiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMTE2LjY1MSwyOTEuNzU1bDMyLTg1LjMzM2MyLjA2OS01LjUyNS0wLjcyNS0xMS42NjktNi4yMjktMTMuNzM5Yy01LjU0Ny0yLjA0OC0xMS42NjksMC43MDQtMTMuNzM5LDYuMjI5ICAgICBsLTIyLjAxNiw1OC43MDlsLTIyLjAxNi01OC43MDljLTIuMDY5LTUuNTA0LTguMjEzLTguMjU2LTEzLjczOS02LjIyOWMtNS41MDQsMi4wNjktOC4yOTksOC4yMTMtNi4yMjksMTMuNzM5bDMyLDg1LjMzMyAgICAgYzEuNTU3LDQuMTYsNS41NDcsNi45MTIsOS45ODQsNi45MTJDMTExLjEwNCwyOTguNjY3LDExNS4wOTMsMjk1LjkxNSwxMTYuNjUxLDI5MS43NTV6IiBmaWxsPSIjMDAwMDAwIi8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" />
					</span>
				</button>
			</div>
			<div class="inputBoxOption-child-group">
				<button class="inputBoxOption-child noActive" child-function="removeFormatting">
					<span class="inputBoxOption-child-view">
						<i class="fa fa-eraser"></i>
					</span>
				</button>
			</div>
		</div>


		<style type="text/css" media="screen">
			.inputBox {
				background: #fff;
				padding: 20px;
				border: 1px solid #aaa;
				box-shadow: 2px 2px 3px 0 #ccc;
				border-radius: 5px;
				cursor: text;
				outline: none;
				caret-color: grey;
			}
			.inputBox:hover,
			.inputBox:focus {
				box-shadow: 2px 2px 3px 0 #ccc, 2px 2px 5px 1px #aaa;
			}
			ol {
				list-style-type: decimal;
			}
			ol ol {
				list-style-type: lower-roman;
			}
			ol ol ol {
				list-style-type: lower-latin;
			}
		</style>
		<div contenteditable-family="f1" id="content-ed-f1">
		</div>

		<style type="text/css">
			.inputTakerPopUp {
				display: none;
				position: fixed;
				z-index: 20;
				left: 0;
				top: 0;
				background: rgba(229, 231, 236, 0.68);
				z-index: 2;
				padding: 0;
				margin: 0;
				width: 100%;
				height: 100%;
				align-items: center;
				justify-content: center;
			}
			.inputTakerPopUp.activate {
				display: flex;
			}
			.inputTakerBody {
				border: 1px solid #bbb;
				border-radius: 3px;
				padding: 20px;
				min-height: 50%;
				min-width: 70%;
				background: #fff;
				box-shadow: 2px 2px 5px 2px #909090;
			}
			.EnterLink {

			}
			.EnterLinkText {
				text-align: left;
				font-weight: 500;
				font-size: 16px;
				margin-bottom: 5px;
			}
			.EnterLinkForm {
				display: flex;
			}
			.EnterLinkForm input {
				width: 60%;
				font-size: 18px;
				padding: 12px 18px;
				font-weight: 500;
				color: #353535;
				border: 1px solid #aaa;
				border-right: none;
				border-radius: 3px 0 0 3px;
			}
			.EnterLinkForm button {
				padding: 12px 18px;
				font-size: 18px;
				background: #007bff;
				color: #fff;
				font-weight: 600;
				border: none;
				border-radius: 0 3px 3px 0;
			}
			.nav-link {
				font-weight: 600;
				font-size: 16px;
				text-transform: uppercase;
			}
		</style>
		<div id="popUpInput">
			<div class="inputTakerBody">
				<div>
					<div class="nav nav-tabs" id="nav-tab" role="tablist">
						<a class="nav-item nav-link active" id="nav-add-link-tab" data-toggle="tab" href="#nav-add-link" role="tab" aria-controls="nav-add-link">
							Add Link
						</a>
						<a class="nav-item nav-link" id="nav-upload-image-tab" data-toggle="tab" href="#nav-upload-image" role="tab" aria-controls="nav-upload-image">
							Upload Image
						</a>
						<a class="nav-item nav-link" id="nav-upload-video-tab" data-toggle="tab" href="#nav-upload-video" role="tab" aria-controls="nav-upload-video">
							Upload Video
						</a>
					</div>
				</div>
				<div class="tab-content" id="nav-tabContent">
					<div class="tab-pane fade show active" id="nav-add-link" role="tabpanel">
						<div class="EnterLink py-4">
							<form class="form-inline">
								<div class="form-group mx-1 mb-2">
									<label class="sr-only">Please enter a link</label>
									<input type="text" class="form-control form-control-lg" placeholder="Enter link">
								</div>
								<button type="submit" class="btn btn-primary btn-lg mb-2">Add link</button>
							</form>
						</div>
					</div>
					<div class="tab-pane fade" id="nav-upload-image" role="tabpanel">...</div>
					<div class="tab-pane fade" id="nav-upload-video" role="tabpanel">...</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">

		$(function(){
			var editor = new smartInputBox('#contentEditParent', '#content-ed-f1', '#content-ed-f1-toolbar', '#popUpInput');
		});

		var smartInputBox = function(parentContainerId, editorDivId, toolbarDivId, inputTakerPopUpId) {
			
			var thisParentContainerDiv = $(parentContainerId)
			var thisContentEditableDiv = $(editorDivId)
			var thisToolbarDiv = $(toolbarDivId)
			let thisInputTakerPopUpDiv = $(inputTakerPopUpId)
			// (enableObjectResizing) call command in beginning

			// put necessary properties in the basic references
			thisParentContainerDiv.css('position', 'relative');
			thisContentEditableDiv.attr('contenteditable', 'true');
			thisContentEditableDiv.addClass('inputBox')
			thisInputTakerPopUpDiv.addClass('inputTakerPopUp');


			var editorButtons = {
				'undoaction': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'undo',
				},
				'redoaction': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'redo',
				},
				'printaction': {
					'isCommand': false,
					'toBeChecked': false,
					'commandName': '',
				},
				'fontStyle': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'commandName': 'fontName',
				},
				'fontSize': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'commandName': 'fontSize',
				},
				'italic': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'italic',
				},
				'bold': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'bold',
				},
				'underline': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'underline',
				},
				'highlight': {
					'isCommand': true,
					'toBeChecked': true,
					'parameter': '#fcf8e3',
					'commandName': 'hiliteColor',
				},
				'addLink': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'commandName': 'createLink',
				},
				'addImage': {					// parameter
					'isCommand': true,
					'toBeChecked': false,
					'parameter': true,
					'upload': true,
					'commandName': 'insertImage',
				},
				'alignLeft': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyLeft',
				},
				'alignCenter': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyCenter',
				},
				'alignRight': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyRight',
				},
				'alignJustify': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'justifyFull',
				},
				'textHeight': {
					'isCommand': false,
					'toBeChecked': false,
					'commandName': 'lineHeight',
				},
				'orderedListMaker': {
					'isCommand': true,
					'toBeChecked': false,
					'commandName': 'insertOrderedList',
				},
				'unorderedListMaker': {
					'isCommand': true,
					'toBeChecked': false,
					'commandName': 'insertUnorderedList',
				},
				'indent': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'indent',
				},
				'outdent': {
					'isCommand': true,
					'toBeChecked': true,
					'commandName': 'outdent',
				},
				'addPoll': {
					'isCommand': false,
					'toBeChecked': false,
					'commandName': 'outdent',
				},
				'removeFormatting': {
					'isCommand': true,
					'toBeChecked': false,
					'commandName': 'removeFormat',
				},
			};

			function checkForEachButtonToBeActive() {

				// let boldButtonJsRef = thisOptionSet.find('[child-function="bold"]');
				for(let propertyFunction in editorButtons) {
					if(editorButtons[propertyFunction]['isCommand'] && editorButtons[propertyFunction]['toBeChecked'])
					{
						// console.log(propertyFunction, editorButtons[propertyFunction]['commandName'], thisToolbarDiv.find('[child-function="' + propertyFunction + '"]'))
						if(document.queryCommandState(editorButtons[propertyFunction]['commandName']))
						{
							console.log(propertyFunction)	
							setActiveButton(thisToolbarDiv.find('[child-function="' + propertyFunction + '"]'))
						}
						else
						{
							setInactiveButton(thisToolbarDiv.find('[child-function="' + propertyFunction + '"]'))
						}
					}

				}

			}

			document.onselectionchange = function(event) {
				if(thisParentContainerDiv.find(':focus').length > 0)
					checkForEachButtonToBeActive()
			};

			function checkForKeyPressActionsForDifferentElements(event) {
				if(event.keyCode == 9)
				{
					event.preventDefault();
					// console.log("sdfs")
					if(isSelectionInsideElementTag('li'))
					{
						if(event.shiftKey)
							document.execCommand('outdent', false, null);
						else
							document.execCommand('indent', false, null);
					}
					else
					{
						document.execCommand('insertHTML', false, '&emsp;')
					}
				}
			}

			thisContentEditableDiv.on('keydown', function(event){
				checkForKeyPressActionsForDifferentElements(event)
			})

			function isSelectionInsideElementTag(tagName) {
				var sel, containerNode;
				tagName = tagName.toUpperCase();
				if (window.getSelection)
				{
					sel = window.getSelection();
					if (sel.rangeCount > 0)
					{
						containerNode = sel.getRangeAt(0).commonAncestorContainer;
					}
				}
				else if ( (sel = document.selection) && sel.type != "Control" )
				{
				    containerNode = sel.createRange().parentElement();
				}
				while (containerNode)
				{
				    if (containerNode.nodeType == 1 && containerNode.tagName == tagName)
				    {
				        return true;
				    }
				    containerNode = containerNode.parentNode;
				    if(containerNode && containerNode.getAttribute && containerNode.getAttribute('id') == thisContentEditableDiv.attr('id'))
				    {
				    	return false;
				    }
				}
				return false;
			}

			var selectedTextObjectSet = {}
			thisToolbarDiv.on('click', '.inputBoxOption-child', function(event) {
				event.preventDefault();
				let buttonChildRef = event.currentTarget;
				checkAndSetActive(buttonChildRef, event);
				let buttonChildJsRef = $(event.currentTarget)
				// let eventName = "content.edit." + buttonChildJsRef.attr('child-function')
				// $('.inputBox[contenteditable-family="' + buttonChildJsRef.closest('.inputBoxOptionSet').attr('contenteditable-family') + '"]').focus()
				// buttonChildJsRef.closest('.inputBoxOptionSet').trigger()
			});

			function checkAndSetActive(currentButton, event, isUsingJs=false)
			{
				let clickedOptionButtonJsref = $(currentButton);
				// activate/deactivate all its functionalities
				doActionOfReferencedButton(clickedOptionButtonJsref)

				if(clickedOptionButtonJsref.hasClass('active') && (isUsingJs || $(event.target).closest('.no-active-trigger').length == 0)) 
					setInactiveButton(clickedOptionButtonJsref)
				else
					setActiveButton(clickedOptionButtonJsref)
			}

			// set the button inactive in the toolbar
			function setInactiveButton(clickedOptionButton) {
				let clickedOptionButtonJsref = $(clickedOptionButton)
				clickedOptionButtonJsref.removeClass('active')
			}

			// set the button active in the toolbar
			function setActiveButton(clickedOptionButton) {
				let clickedOptionButtonJsref = $(clickedOptionButton)
				clickedOptionButtonJsref.addClass('active')
				if(clickedOptionButtonJsref.hasClass('active-no-stay'))
				{
					console.log("active-no-stay")
					$(document).on('click', function closeOnOutOfFocus(ev){
						if($(ev.target).closest(clickedOptionButtonJsref).length == 0)
						{
							setInactiveButton(clickedOptionButtonJsref);
							$(document).off('click', closeOnOutOfFocus)
						}
					})
				}
			}

			function doActionOfReferencedButton(clickedOptionButtonJsref)
			{

				let actionProp = clickedOptionButtonJsref.attr('child-function')
				if(editorButtons[actionProp]['isCommand'] && editorButtons[actionProp]['parameter'] != true)
				{
					thisContentEditableDiv.focus();
					console.log(actionProp, editorButtons[actionProp])
					document.execCommand(editorButtons[actionProp]['commandName'], false, editorButtons[actionProp]['parameter']);
				}
				// with parameter default command
				else if(editorButtons[actionProp]['isCommand'])
				{
					let parameter = "";
					activateInputTaker(actionProp)
					document.execCommand(editorButtons[actionProp]['commandName'], false, parameter);
				}
			}

			function activateInputTaker(actionProp) {
				if(editorButtons[actionProp]['upload']) {

				}
				else {
					thisInputTakerPopUpDiv.addClass('activate');
				}
			}

			function deactiveInputtaker() {
				thisInputTakerPopUpDiv.removeClass('activate');
			}

			function uniqueChildButtonFunction(event) {
				let currentButtonJsRef = $(event.currentTarget);
				let buttonGroupSet = currentButtonJsRef.siblings('[child-function]');
				buttonGroupSet.each(function(index, el) {
					setInactiveButton(el)
				});

			}
			thisToolbarDiv.on('click', '[child-selection="unique"] [child-function]', uniqueChildButtonFunction);

		}
		

		/*function gatherAndStoreTextObjectForTheContentEditable(event) {

			let textObject = new Object();

		    if (window.getSelection) {
		        textObject = window.getSelection();
		    } else if (document.selection && document.selection.createRange ) {
				textObject = document.selection.createRange();
		    }

		    selectedTextObjectSet[$(event.currentTarget).attr('contenteditable-family')] = textObject;

		}

		function getSelectionObject() {
			let textObject = new Object();
		    if (window.getSelection) {
		        textObject = window.getSelection();
		    } else if (document.selection && document.selection.createRange ) {
				textObject = document.selection.createRange();
		    }
		    return textObject;
		}

		function activateActionOfButton(clickedOptionButtonJsref) {
			let textObject = getSelectionObject()
		    if(textObject.type == 'Caret') {
				console.log(textObject.getRangeAt(0))
				let rangeCaretObj = textObject.getRangeAt(0);

				let rangeSet = document.createRange()
				// rangeSet.setStart(rangeCaretObj.startContainer, rangeCaretObj.startOffset);
				$('<span/>').html("wer").appendTo(rangeCaretObj.startContainer)
				// rangeSet.selectNode(el)

		    } else {

			    let nodeRanges = getSafeRanges(textObject.getRangeAt(0))
			    console.log(nodeRanges)
				if(clickedOptionButtonJsref.attr('child-function') == "bold") {

					for( let i=0; i<nodeRanges.length; i++) {

						let boldEl = document.createElement('span')
						$(boldEl).css('font-weight', '600');
						nodeRanges[i].surroundContents(boldEl);
					}
				}
				
		    }

		}

		// $('.inputBox').on('keydown', function(event) {
		// 	console.log(event.keyCode)

		// })

		function getSafeRanges(dangerous) {
		    var a = dangerous.commonAncestorContainer;
		    // Starts -- Work inward from the start, selecting the largest safe range
		    var s = new Array(0), rs = new Array(0);
		    if (dangerous.startContainer != a) 
		    {
		        for(var i = dangerous.startContainer; i != a; i = i.parentNode) 
		        {
		            s.push(i)
		        }
		    }
		    if (0 < s.length) for(var i = 0; i < s.length; i++) {
		        var xs = document.createRange();
		        if (i) {
		            xs.setStartAfter(s[i-1]);
		            xs.setEndAfter(s[i].lastChild);
		        }
		        else {
					xs.setStart(s[i], dangerous.startOffset);
					xs.setEndAfter( (s[i].nodeType == Node.TEXT_NODE) ? s[i] : s[i].lastChild);
		        }
		        rs.push(xs);
		    }

		    // Ends -- basically the same code reversed
		    var e = new Array(0), re = new Array(0);
		    if (dangerous.endContainer != a)
		        for(var i = dangerous.endContainer; i != a; i = i.parentNode)
		            e.push(i);
		    if (0 < e.length) for(var i = 0; i < e.length; i++) {
		        var xe = document.createRange();
		        if (i) {
		            xe.setStartBefore(e[i].firstChild);
		            xe.setEndBefore(e[i-1]);
		        }
		        else {
					xe.setStartBefore( (e[i].nodeType == Node.TEXT_NODE) ? e[i] : e[i].firstChild );
					xe.setEnd(e[i], dangerous.endOffset);
		        }
		        re.unshift(xe);
		    }

		    // Middle -- the uncaptured middle
		    if ((0 < s.length) && (0 < e.length)) {
		        var xm = document.createRange();
		        xm.setStartAfter(s[s.length - 1]);
		        xm.setEndBefore(e[e.length - 1]);
		    }
		    else {
		        return [dangerous];
		    }

		    // Concat
		    rs.push(xm);
		    response = rs.concat(re);    

		    // Send to Console
		    return response;
		}*/

	</script>
</body>
</html>